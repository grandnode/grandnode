{"version":3,"sources":["kendo.reorderable.js"],"names":["f","define","$","undefined","toggleHintClass","hint","denied","find","removeClass","addClass","kendo","window","getOffset","Widget","ui","CHANGE","KREORDERABLE","Reorderable","extend","init","element","options","draggable","that","this","group","guid","fn","call","Draggable","autoScroll","filter","reorderDropCue","kendoDropTarget","dragenter","e","dropTarget","offset","left","_draggable","_dropTargetAllowed","_isLastDraggable","inSameContainer","source","target","sourceIndex","_index","targetIndex","_dropTarget","outerWidth","css","height","outerHeight","top","appendTo","document","body","dragleave","remove","drop","trigger","oldIndex","newIndex","position","bind","dragcancel","_elements","dragend","dragstart","currentTarget","drag","dropStartOffset","width","hasClass","pageX","name","events","item","elements","get","found","length","pop","dragOverContainers","index","destroy","each","data","plugin","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.reorderable.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.reorderable', [\n        'kendo.core',\n        'kendo.draganddrop'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'reorderable',\n        name: 'Reorderable',\n        category: 'framework',\n        depends: [\n            'core',\n            'draganddrop'\n        ],\n        advanced: true\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, getOffset = kendo.getOffset, Widget = kendo.ui.Widget, CHANGE = 'change', KREORDERABLE = 'k-reorderable';\n        function toggleHintClass(hint, denied) {\n            hint = $(hint);\n            if (denied) {\n                hint.find('.k-drag-status').removeClass('k-add').addClass('k-denied');\n            } else {\n                hint.find('.k-drag-status').removeClass('k-denied').addClass('k-add');\n            }\n        }\n        var Reorderable = Widget.extend({\n            init: function (element, options) {\n                var that = this, draggable, group = kendo.guid() + '-reorderable';\n                Widget.fn.init.call(that, element, options);\n                element = that.element.addClass(KREORDERABLE);\n                options = that.options;\n                that.draggable = draggable = options.draggable || new kendo.ui.Draggable(element, {\n                    group: group,\n                    autoScroll: true,\n                    filter: options.filter,\n                    hint: options.hint\n                });\n                that.reorderDropCue = $('<div class=\"k-reorder-cue\"><div class=\"k-icon k-i-arrow-s\"></div><div class=\"k-icon k-i-arrow-n\"></div></div>');\n                element.find(draggable.options.filter).kendoDropTarget({\n                    group: draggable.options.group,\n                    dragenter: function (e) {\n                        if (!that._draggable) {\n                            return;\n                        }\n                        var dropTarget = this.element, offset;\n                        var denied = !that._dropTargetAllowed(dropTarget) || that._isLastDraggable();\n                        toggleHintClass(e.draggable.hint, denied);\n                        if (!denied) {\n                            offset = getOffset(dropTarget);\n                            var left = offset.left;\n                            if (options.inSameContainer && !options.inSameContainer({\n                                    source: dropTarget,\n                                    target: that._draggable,\n                                    sourceIndex: that._index(dropTarget),\n                                    targetIndex: that._index(that._draggable)\n                                })) {\n                                that._dropTarget = dropTarget;\n                            } else {\n                                if (that._index(dropTarget) > that._index(that._draggable)) {\n                                    left += dropTarget.outerWidth();\n                                }\n                            }\n                            that.reorderDropCue.css({\n                                height: dropTarget.outerHeight(),\n                                top: offset.top,\n                                left: left\n                            }).appendTo(document.body);\n                        }\n                    },\n                    dragleave: function (e) {\n                        toggleHintClass(e.draggable.hint, true);\n                        that.reorderDropCue.remove();\n                        that._dropTarget = null;\n                    },\n                    drop: function () {\n                        that._dropTarget = null;\n                        if (!that._draggable) {\n                            return;\n                        }\n                        var dropTarget = this.element;\n                        var draggable = that._draggable;\n                        if (that._dropTargetAllowed(dropTarget) && !that._isLastDraggable()) {\n                            that.trigger(CHANGE, {\n                                element: that._draggable,\n                                target: dropTarget,\n                                oldIndex: that._index(draggable),\n                                newIndex: that._index(dropTarget),\n                                position: getOffset(that.reorderDropCue).left > getOffset(dropTarget).left ? 'after' : 'before'\n                            });\n                        }\n                    }\n                });\n                draggable.bind([\n                    'dragcancel',\n                    'dragend',\n                    'dragstart',\n                    'drag'\n                ], {\n                    dragcancel: function () {\n                        that.reorderDropCue.remove();\n                        that._draggable = null;\n                        that._elements = null;\n                    },\n                    dragend: function () {\n                        that.reorderDropCue.remove();\n                        that._draggable = null;\n                        that._elements = null;\n                    },\n                    dragstart: function (e) {\n                        that._draggable = e.currentTarget;\n                        that._elements = that.element.find(that.draggable.options.filter);\n                    },\n                    drag: function (e) {\n                        if (!that._dropTarget || this.hint.find('.k-drag-status').hasClass('k-denied')) {\n                            return;\n                        }\n                        var dropStartOffset = getOffset(that._dropTarget).left;\n                        var width = that._dropTarget.outerWidth();\n                        if (e.pageX > dropStartOffset + width / 2) {\n                            that.reorderDropCue.css({ left: dropStartOffset + width });\n                        } else {\n                            that.reorderDropCue.css({ left: dropStartOffset });\n                        }\n                    }\n                });\n            },\n            options: {\n                name: 'Reorderable',\n                filter: '*'\n            },\n            events: [CHANGE],\n            _isLastDraggable: function () {\n                var inSameContainer = this.options.inSameContainer, draggable = this._draggable[0], elements = this._elements.get(), found = false, item;\n                if (!inSameContainer) {\n                    return false;\n                }\n                while (!found && elements.length > 0) {\n                    item = elements.pop();\n                    found = draggable !== item && inSameContainer({\n                        source: draggable,\n                        target: item,\n                        sourceIndex: this._index(draggable),\n                        targetIndex: this._index(item)\n                    });\n                }\n                return !found;\n            },\n            _dropTargetAllowed: function (dropTarget) {\n                var inSameContainer = this.options.inSameContainer, dragOverContainers = this.options.dragOverContainers, draggable = this._draggable;\n                if (draggable[0] === dropTarget[0]) {\n                    return false;\n                }\n                if (!inSameContainer || !dragOverContainers) {\n                    return true;\n                }\n                if (inSameContainer({\n                        source: draggable,\n                        target: dropTarget,\n                        sourceIndex: this._index(draggable),\n                        targetIndex: this._index(dropTarget)\n                    })) {\n                    return true;\n                }\n                return dragOverContainers(this._index(draggable), this._index(dropTarget));\n            },\n            _index: function (element) {\n                return this._elements.index(element);\n            },\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(that);\n                that.element.find(that.draggable.options.filter).each(function () {\n                    var item = $(this);\n                    if (item.data('kendoDropTarget')) {\n                        item.data('kendoDropTarget').destroy();\n                    }\n                });\n                if (that.draggable) {\n                    that.draggable.destroy();\n                    that.draggable.element = that.draggable = null;\n                }\n                that.elements = that.reorderDropCue = that._elements = that._draggable = null;\n            }\n        });\n        kendo.ui.plugin(Reorderable);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}