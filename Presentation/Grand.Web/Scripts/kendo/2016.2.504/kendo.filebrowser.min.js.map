{"version":3,"sources":["kendo.filebrowser.js"],"names":["f","define","$","undefined","bindDragEventWrappers","element","onDragEnter","onDragLeave","hideInterval","lastDrag","on","NS","Date","setInterval","sinceLastDrag","clearInterval","concatPaths","path","name","match","sizeFormatter","value","suffix","Math","round","fieldName","fields","descriptor","isPlainObject","from","field","offsetTop","FileBrowser","SearchBox","Breadcrumbs","kendo","window","Widget","ui","proxy","extend","placeholderSupported","support","placeholder","browser","isFunction","trimSlashesRegExp","CHANGE","APPLY","ERROR","CLICK","BREADCRUBMSNS","SEARCHBOXNS","NAMEFIELD","SIZEFIELD","TYPEFIELD","DEFAULTSORTORDER","dir","EMPTYTILE","template","TOOLBARTMPL","data","schemas","filebrowser","items","model","id","size","type","transports","RemoteTransport","init","options","fn","call","this","_call","read","create","destroy","update","msie","version","height","that","addClass","_deleteClick","_addClick","_directoryKeyDown","_directoryBlur","_dataSource","refresh","messages","uploadFile","orderBy","orderByName","orderBySize","directoryNotFound","emptyFolder","deleteFile","invalidFileType","overwriteFile","dropFilesHere","search","transport","fileTypes","events","dataSource","unbind","_errorHandler","add","list","toolbar","off","selected","_selectedItem","fileUrl","get","replace","format","encodeURIComponent","listView","select","length","getByUid","attr","_toolbar","arrangeBy","text","showUpload","uploadUrl","showCreate","showDelete","appendTo","find","kendoUpload","multiple","localization","async","saveUrl","autoUpload","upload","_fileUpload","error","e","_error","xhr","XMLHttpRequest","status","end","kendoDropDownList","dataTextField","dataValueField","change","_attachDropzoneEvents","document","documentElement","_dropEnter","_dropLeave","_scrollHandler","_positionDropzone","_removeDropzone","offset","css","width","clientWidth","clientHeight","lineHeight","removeClass","top","left","item","message","_showMessage","remove","createDirectory","_getFieldName","reader","filterRegExp","RegExp","split","join","fileName","files","fileNameField","sizeField","test","_createFile","one","set","response","_tiles","filter","preventDefault","_findFile","idx","result","typeField","nameField","toLowerCase","index","view","file","_forceReload","insert","lastDirectoryIdx","_nameDirectory","uid","input","edit","scrollTop","offsetHeight","setTimeout","_nameExists","keyCode","currentTarget","blur","save","candidate","directoryNames","indexOf","push","inArray","sort","operator","_content","_dblClick","ListView","_itemTmpl","editTemplate","_editTmpl","selectable","autoBind","dataBinding","parent","action","dataBound","wrapper","append","_listViewChange","folder","li","hasClass","breadcrumbs","trigger","schema","typeSortOrder","nameSortOrder","DataSource","bind","_navigation","navigation","kendoBreadcrumbs","searchBox","kendoSearchBox","label","statusText","html","_path","_wrapper","_keydown","_updateValue","_click","_focus","_blur","val","_toggleLabel","toggle","hide","parents","style","wrap","insertBefore","_rootClick","gap","_update","charAt","target","prevAll","addBack","overlay","is","show","focus","segments","segment","empty","_adjustSectionWidth","a","links","each","prev","_value","trail","map","b","plugin","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.filebrowser.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.filebrowser', [\n        'kendo.listview',\n        'kendo.dropdownlist',\n        'kendo.upload'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'filebrowser',\n        name: 'FileBrowser',\n        category: 'web',\n        description: '',\n        hidden: true,\n        depends: [\n            'selectable',\n            'listview',\n            'dropdownlist',\n            'upload'\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, Widget = kendo.ui.Widget, isPlainObject = $.isPlainObject, proxy = $.proxy, extend = $.extend, placeholderSupported = kendo.support.placeholder, browser = kendo.support.browser, isFunction = kendo.isFunction, trimSlashesRegExp = /(^\\/|\\/$)/g, CHANGE = 'change', APPLY = 'apply', ERROR = 'error', CLICK = 'click', NS = '.kendoFileBrowser', BREADCRUBMSNS = '.kendoBreadcrumbs', SEARCHBOXNS = '.kendoSearchBox', NAMEFIELD = 'name', SIZEFIELD = 'size', TYPEFIELD = 'type', DEFAULTSORTORDER = {\n                field: TYPEFIELD,\n                dir: 'asc'\n            }, EMPTYTILE = kendo.template('<li class=\"k-tile-empty\"><strong>${text}</strong></li>'), TOOLBARTMPL = '<div class=\"k-widget k-filebrowser-toolbar k-header k-floatwrap\">' + '<div class=\"k-toolbar-wrap\">' + '# if (showUpload) { # ' + '<div class=\"k-widget k-upload\"><div class=\"k-button k-button-icontext k-upload-button\">' + '<span class=\"k-icon k-add\"></span>#=messages.uploadFile#<input type=\"file\" name=\"file\" /></div></div>' + '# } #' + '# if (showCreate) { #' + '<button type=\"button\" class=\"k-button k-button-icon\"><span class=\"k-icon k-addfolder\" /></button>' + '# } #' + '# if (showDelete) { #' + '<button type=\"button\" class=\"k-button k-button-icon k-state-disabled\"><span class=\"k-icon k-delete\" /></button>&nbsp;' + '# } #' + '</div>' + '<div class=\"k-tiles-arrange\">' + '<label>#=messages.orderBy#: <select /></label>' + '</div>' + '</div>';\n        extend(true, kendo.data, {\n            schemas: {\n                'filebrowser': {\n                    data: function (data) {\n                        return data.items || data || [];\n                    },\n                    model: {\n                        id: 'name',\n                        fields: {\n                            name: 'name',\n                            size: 'size',\n                            type: 'type'\n                        }\n                    }\n                }\n            }\n        });\n        extend(true, kendo.data, {\n            transports: {\n                'filebrowser': kendo.data.RemoteTransport.extend({\n                    init: function (options) {\n                        kendo.data.RemoteTransport.fn.init.call(this, $.extend(true, {}, this.options, options));\n                    },\n                    _call: function (type, options) {\n                        options.data = $.extend({}, options.data, { path: this.options.path() });\n                        if (isFunction(this.options[type])) {\n                            this.options[type].call(this, options);\n                        } else {\n                            kendo.data.RemoteTransport.fn[type].call(this, options);\n                        }\n                    },\n                    read: function (options) {\n                        this._call('read', options);\n                    },\n                    create: function (options) {\n                        this._call('create', options);\n                    },\n                    destroy: function (options) {\n                        this._call('destroy', options);\n                    },\n                    update: function () {\n                    },\n                    options: {\n                        read: { type: 'POST' },\n                        update: { type: 'POST' },\n                        create: { type: 'POST' },\n                        destroy: { type: 'POST' }\n                    }\n                })\n            }\n        });\n        function bindDragEventWrappers(element, onDragEnter, onDragLeave) {\n            var hideInterval, lastDrag;\n            element.on('dragenter' + NS, function () {\n                onDragEnter();\n                lastDrag = new Date();\n                if (!hideInterval) {\n                    hideInterval = setInterval(function () {\n                        var sinceLastDrag = new Date() - lastDrag;\n                        if (sinceLastDrag > 100) {\n                            onDragLeave();\n                            clearInterval(hideInterval);\n                            hideInterval = null;\n                        }\n                    }, 100);\n                }\n            }).on('dragover' + NS, function () {\n                lastDrag = new Date();\n            });\n        }\n        var offsetTop;\n        if (browser.msie && browser.version < 8) {\n            offsetTop = function (element) {\n                return element.offsetTop;\n            };\n        } else {\n            offsetTop = function (element) {\n                return element.offsetTop - $(element).height();\n            };\n        }\n        function concatPaths(path, name) {\n            if (path === undefined || !path.match(/\\/$/)) {\n                path = (path || '') + '/';\n            }\n            return path + name;\n        }\n        function sizeFormatter(value) {\n            if (!value) {\n                return '';\n            }\n            var suffix = ' bytes';\n            if (value >= 1073741824) {\n                suffix = ' GB';\n                value /= 1073741824;\n            } else if (value >= 1048576) {\n                suffix = ' MB';\n                value /= 1048576;\n            } else if (value >= 1024) {\n                suffix = ' KB';\n                value /= 1024;\n            }\n            return Math.round(value * 100) / 100 + suffix;\n        }\n        function fieldName(fields, name) {\n            var descriptor = fields[name];\n            if (isPlainObject(descriptor)) {\n                return descriptor.from || descriptor.field || name;\n            }\n            return descriptor;\n        }\n        var FileBrowser = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = options || {};\n                Widget.fn.init.call(that, element, options);\n                that.element.addClass('k-filebrowser');\n                that.element.on(CLICK + NS, '.k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-delete)', proxy(that._deleteClick, that)).on(CLICK + NS, '.k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-addfolder)', proxy(that._addClick, that)).on('keydown' + NS, 'li.k-state-selected input', proxy(that._directoryKeyDown, that)).on('blur' + NS, 'li.k-state-selected input', proxy(that._directoryBlur, that));\n                that._dataSource();\n                that.refresh();\n                that.path(that.options.path);\n            },\n            options: {\n                name: 'FileBrowser',\n                messages: {\n                    uploadFile: 'Upload',\n                    orderBy: 'Arrange by',\n                    orderByName: 'Name',\n                    orderBySize: 'Size',\n                    directoryNotFound: 'A directory with this name was not found.',\n                    emptyFolder: 'Empty Folder',\n                    deleteFile: 'Are you sure you want to delete \"{0}\"?',\n                    invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n                    overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n                    dropFilesHere: 'drop file here to upload',\n                    search: 'Search'\n                },\n                transport: {},\n                path: '/',\n                fileTypes: '*.*'\n            },\n            events: [\n                ERROR,\n                CHANGE,\n                APPLY\n            ],\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(that);\n                that.dataSource.unbind(ERROR, that._errorHandler);\n                that.element.add(that.list).add(that.toolbar).off(NS);\n                kendo.destroy(that.element);\n            },\n            value: function () {\n                var that = this, selected = that._selectedItem(), path, fileUrl = that.options.transport.fileUrl;\n                if (selected && selected.get(TYPEFIELD) === 'f') {\n                    path = concatPaths(that.path(), selected.get(NAMEFIELD)).replace(trimSlashesRegExp, '');\n                    if (fileUrl) {\n                        path = isFunction(fileUrl) ? fileUrl(path) : kendo.format(fileUrl, encodeURIComponent(path));\n                    }\n                    return path;\n                }\n            },\n            _selectedItem: function () {\n                var listView = this.listView, selected = listView.select();\n                if (selected.length) {\n                    return this.dataSource.getByUid(selected.attr(kendo.attr('uid')));\n                }\n            },\n            _toolbar: function () {\n                var that = this, template = kendo.template(TOOLBARTMPL), messages = that.options.messages, arrangeBy = [\n                        {\n                            text: messages.orderByName,\n                            value: 'name'\n                        },\n                        {\n                            text: messages.orderBySize,\n                            value: 'size'\n                        }\n                    ];\n                that.toolbar = $(template({\n                    messages: messages,\n                    showUpload: that.options.transport.uploadUrl,\n                    showCreate: that.options.transport.create,\n                    showDelete: that.options.transport.destroy\n                })).appendTo(that.element).find('.k-upload input').kendoUpload({\n                    multiple: false,\n                    localization: { dropFilesHere: messages.dropFilesHere },\n                    async: {\n                        saveUrl: that.options.transport.uploadUrl,\n                        autoUpload: true\n                    },\n                    upload: proxy(that._fileUpload, that),\n                    error: function (e) {\n                        that._error({\n                            xhr: e.XMLHttpRequest,\n                            status: 'error'\n                        });\n                    }\n                }).end();\n                that.upload = that.toolbar.find('.k-upload input').data('kendoUpload');\n                that.arrangeBy = that.toolbar.find('.k-tiles-arrange select').kendoDropDownList({\n                    dataSource: arrangeBy,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        that.orderBy(this.value());\n                    }\n                }).data('kendoDropDownList');\n                that._attachDropzoneEvents();\n            },\n            _attachDropzoneEvents: function () {\n                var that = this;\n                if (that.options.transport.uploadUrl) {\n                    bindDragEventWrappers($(document.documentElement), $.proxy(that._dropEnter, that), $.proxy(that._dropLeave, that));\n                    that._scrollHandler = proxy(that._positionDropzone, that);\n                }\n            },\n            _dropEnter: function () {\n                this._positionDropzone();\n                $(document).on('scroll' + NS, this._scrollHandler);\n            },\n            _dropLeave: function () {\n                this._removeDropzone();\n                $(document).off('scroll' + NS, this._scrollHandler);\n            },\n            _positionDropzone: function () {\n                var that = this, element = that.element, offset = element.offset();\n                that.toolbar.find('.k-dropzone').addClass('k-filebrowser-dropzone').offset(offset).css({\n                    width: element[0].clientWidth,\n                    height: element[0].clientHeight,\n                    lineHeight: element[0].clientHeight + 'px'\n                });\n            },\n            _removeDropzone: function () {\n                this.toolbar.find('.k-dropzone').removeClass('k-filebrowser-dropzone').css({\n                    width: '',\n                    height: '',\n                    lineHeight: '',\n                    top: '',\n                    left: ''\n                });\n            },\n            _deleteClick: function () {\n                var that = this, item = that.listView.select(), message = kendo.format(that.options.messages.deleteFile, item.find('strong').text());\n                if (item.length && that._showMessage(message, 'confirm')) {\n                    that.listView.remove(item);\n                }\n            },\n            _addClick: function () {\n                this.createDirectory();\n            },\n            _getFieldName: function (name) {\n                return fieldName(this.dataSource.reader.model.fields, name);\n            },\n            _fileUpload: function (e) {\n                var that = this, options = that.options, fileTypes = options.fileTypes, filterRegExp = new RegExp(('(' + fileTypes.split(',').join(')|(') + ')').replace(/\\*\\./g, '.*.'), 'i'), fileName = e.files[0].name, fileNameField = NAMEFIELD, sizeField = SIZEFIELD, model;\n                if (filterRegExp.test(fileName)) {\n                    e.data = { path: that.path() };\n                    model = that._createFile(fileName);\n                    if (!model) {\n                        e.preventDefault();\n                    } else {\n                        that.upload.one('success', function (e) {\n                            model.set(fileNameField, e.response[that._getFieldName(fileNameField)]);\n                            model.set(sizeField, e.response[that._getFieldName(sizeField)]);\n                            that._tiles = that.listView.items().filter('[' + kendo.attr('type') + '=f]');\n                        });\n                    }\n                } else {\n                    e.preventDefault();\n                    that._showMessage(kendo.format(options.messages.invalidFileType, fileName, fileTypes));\n                }\n            },\n            _findFile: function (name) {\n                var data = this.dataSource.data(), idx, result, typeField = TYPEFIELD, nameField = NAMEFIELD, length;\n                name = name.toLowerCase();\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (data[idx].get(typeField) === 'f' && data[idx].get(nameField).toLowerCase() === name) {\n                        result = data[idx];\n                        break;\n                    }\n                }\n                return result;\n            },\n            _createFile: function (fileName) {\n                var that = this, idx, length, index = 0, model = {}, typeField = TYPEFIELD, view = that.dataSource.view(), file = that._findFile(fileName);\n                if (file) {\n                    if (!that._showMessage(kendo.format(that.options.messages.overwriteFile, fileName), 'confirm')) {\n                        return null;\n                    } else {\n                        file._forceReload = true;\n                        return file;\n                    }\n                }\n                for (idx = 0, length = view.length; idx < length; idx++) {\n                    if (view[idx].get(typeField) === 'f') {\n                        index = idx;\n                        break;\n                    }\n                }\n                model[typeField] = 'f';\n                model[NAMEFIELD] = fileName;\n                model[SIZEFIELD] = 0;\n                return that.dataSource.insert(++index, model);\n            },\n            createDirectory: function () {\n                var that = this, idx, length, lastDirectoryIdx = 0, typeField = TYPEFIELD, nameField = NAMEFIELD, view = that.dataSource.data(), name = that._nameDirectory(), model = new that.dataSource.reader.model();\n                for (idx = 0, length = view.length; idx < length; idx++) {\n                    if (view[idx].get(typeField) === 'd') {\n                        lastDirectoryIdx = idx;\n                    }\n                }\n                model.set(typeField, 'd');\n                model.set(nameField, name);\n                that.listView.one('dataBound', function () {\n                    var selected = that.listView.items().filter('[' + kendo.attr('uid') + '=' + model.uid + ']'), input = selected.find('input');\n                    if (selected.length) {\n                        this.edit(selected);\n                    }\n                    this.element.scrollTop(selected.attr('offsetTop') - this.element[0].offsetHeight);\n                    setTimeout(function () {\n                        input.select();\n                    });\n                }).one('save', function (e) {\n                    var value = e.model.get(nameField);\n                    if (!value) {\n                        e.model.set(nameField, name);\n                    } else {\n                        e.model.set(nameField, that._nameExists(value, model.uid) ? that._nameDirectory() : value);\n                    }\n                });\n                that.dataSource.insert(++lastDirectoryIdx, model);\n            },\n            _directoryKeyDown: function (e) {\n                if (e.keyCode == 13) {\n                    e.currentTarget.blur();\n                }\n            },\n            _directoryBlur: function () {\n                this.listView.save();\n            },\n            _nameExists: function (name, uid) {\n                var data = this.dataSource.data(), typeField = TYPEFIELD, nameField = NAMEFIELD, idx, length;\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (data[idx].get(typeField) === 'd' && data[idx].get(nameField).toLowerCase() === name.toLowerCase() && data[idx].uid !== uid) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _nameDirectory: function () {\n                var name = 'New folder', data = this.dataSource.data(), directoryNames = [], typeField = TYPEFIELD, nameField = NAMEFIELD, candidate, idx, length;\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (data[idx].get(typeField) === 'd' && data[idx].get(nameField).toLowerCase().indexOf(name.toLowerCase()) > -1) {\n                        directoryNames.push(data[idx].get(nameField));\n                    }\n                }\n                if ($.inArray(name, directoryNames) > -1) {\n                    idx = 2;\n                    do {\n                        candidate = name + ' (' + idx + ')';\n                        idx++;\n                    } while ($.inArray(candidate, directoryNames) > -1);\n                    name = candidate;\n                }\n                return name;\n            },\n            orderBy: function (field) {\n                this.dataSource.sort([\n                    {\n                        field: TYPEFIELD,\n                        dir: 'asc'\n                    },\n                    {\n                        field: field,\n                        dir: 'asc'\n                    }\n                ]);\n            },\n            search: function (name) {\n                this.dataSource.filter({\n                    field: NAMEFIELD,\n                    operator: 'contains',\n                    value: name\n                });\n            },\n            _content: function () {\n                var that = this;\n                that.list = $('<ul class=\"k-reset k-floats k-tiles\" />').appendTo(that.element).on('dblclick' + NS, 'li', proxy(that._dblClick, that));\n                that.listView = new kendo.ui.ListView(that.list, {\n                    dataSource: that.dataSource,\n                    template: that._itemTmpl(),\n                    editTemplate: that._editTmpl(),\n                    selectable: true,\n                    autoBind: false,\n                    dataBinding: function (e) {\n                        that.toolbar.find('.k-delete').parent().addClass('k-state-disabled');\n                        if (e.action === 'remove' || e.action === 'sync') {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function () {\n                        if (that.dataSource.view().length) {\n                            that._tiles = this.items().filter('[' + kendo.attr('type') + '=f]');\n                        } else {\n                            this.wrapper.append(EMPTYTILE({ text: that.options.messages.emptyFolder }));\n                        }\n                    },\n                    change: proxy(that._listViewChange, that)\n                });\n            },\n            _dblClick: function (e) {\n                var that = this, li = $(e.currentTarget);\n                if (li.hasClass('k-edit-item')) {\n                    that._directoryBlur();\n                }\n                if (li.filter('[' + kendo.attr('type') + '=d]').length) {\n                    var folder = that.dataSource.getByUid(li.attr(kendo.attr('uid')));\n                    if (folder) {\n                        that.path(concatPaths(that.path(), folder.get(NAMEFIELD)));\n                        that.breadcrumbs.value(that.path());\n                    }\n                } else if (li.filter('[' + kendo.attr('type') + '=f]').length) {\n                    that.trigger(APPLY);\n                }\n            },\n            _listViewChange: function () {\n                var selected = this._selectedItem();\n                if (selected) {\n                    this.toolbar.find('.k-delete').parent().removeClass('k-state-disabled');\n                    if (selected.get(TYPEFIELD) === 'f') {\n                        this.trigger(CHANGE);\n                    }\n                }\n            },\n            _dataSource: function () {\n                var that = this, options = that.options, transport = options.transport, typeSortOrder = extend({}, DEFAULTSORTORDER), nameSortOrder = {\n                        field: NAMEFIELD,\n                        dir: 'asc'\n                    }, schema, dataSource = {\n                        type: transport.type || 'filebrowser',\n                        sort: [\n                            typeSortOrder,\n                            nameSortOrder\n                        ]\n                    };\n                if (isPlainObject(transport)) {\n                    transport.path = proxy(that.path, that);\n                    dataSource.transport = transport;\n                }\n                if (isPlainObject(options.schema)) {\n                    dataSource.schema = options.schema;\n                } else if (transport.type && isPlainObject(kendo.data.schemas[transport.type])) {\n                    schema = kendo.data.schemas[transport.type];\n                }\n                if (that.dataSource && that._errorHandler) {\n                    that.dataSource.unbind(ERROR, that._errorHandler);\n                } else {\n                    that._errorHandler = proxy(that._error, that);\n                }\n                that.dataSource = kendo.data.DataSource.create(dataSource).bind(ERROR, that._errorHandler);\n            },\n            _navigation: function () {\n                var that = this, navigation = $('<div class=\"k-floatwrap\"><input/><input/></div>').appendTo(this.element);\n                that.breadcrumbs = navigation.find('input:first').kendoBreadcrumbs({\n                    value: that.options.path,\n                    change: function () {\n                        that.path(this.value());\n                    }\n                }).data('kendoBreadcrumbs');\n                that.searchBox = navigation.parent().find('input:last').kendoSearchBox({\n                    label: that.options.messages.search,\n                    change: function () {\n                        that.search(this.value());\n                    }\n                }).data('kendoSearchBox');\n            },\n            _error: function (e) {\n                var that = this, status;\n                if (!that.trigger(ERROR, e)) {\n                    status = e.xhr.status;\n                    if (e.status == 'error') {\n                        if (status == '404') {\n                            that._showMessage(that.options.messages.directoryNotFound);\n                        } else if (status != '0') {\n                            that._showMessage('Error! The requested URL returned ' + status + ' - ' + e.xhr.statusText);\n                        }\n                    } else if (status == 'timeout') {\n                        that._showMessage('Error! Server timeout.');\n                    }\n                }\n            },\n            _showMessage: function (message, type) {\n                return window[type || 'alert'](message);\n            },\n            refresh: function () {\n                var that = this;\n                that._navigation();\n                that._toolbar();\n                that._content();\n            },\n            _editTmpl: function () {\n                var html = '<li class=\"k-tile k-state-selected\" ' + kendo.attr('uid') + '=\"#=uid#\" ';\n                html += kendo.attr('type') + '=\"${' + TYPEFIELD + '}\">';\n                html += '#if(' + TYPEFIELD + ' == \"d\") { #';\n                html += '<div class=\"k-thumb\"><span class=\"k-icon k-folder\"></span></div>';\n                html += '#}else{#';\n                html += '<div class=\"k-thumb\"><span class=\"k-icon k-loading\"></span></div>';\n                html += '#}#';\n                html += '#if(' + TYPEFIELD + ' == \"d\") { #';\n                html += '<input class=\"k-input\" ' + kendo.attr('bind') + '=\"value:' + NAMEFIELD + '\"/>';\n                html += '#}#';\n                html += '</li>';\n                return proxy(kendo.template(html), { sizeFormatter: sizeFormatter });\n            },\n            _itemTmpl: function () {\n                var html = '<li class=\"k-tile\" ' + kendo.attr('uid') + '=\"#=uid#\" ';\n                html += kendo.attr('type') + '=\"${' + TYPEFIELD + '}\">';\n                html += '#if(' + TYPEFIELD + ' == \"d\") { #';\n                html += '<div class=\"k-thumb\"><span class=\"k-icon k-folder\"></span></div>';\n                html += '#}else{#';\n                html += '<div class=\"k-thumb\"><span class=\"k-icon k-file\"></span></div>';\n                html += '#}#';\n                html += '<strong>${' + NAMEFIELD + '}</strong>';\n                html += '#if(' + TYPEFIELD + ' == \"f\") { # <span class=\"k-filesize\">${this.sizeFormatter(' + SIZEFIELD + ')}</span> #}#';\n                html += '</li>';\n                return proxy(kendo.template(html), { sizeFormatter: sizeFormatter });\n            },\n            path: function (value) {\n                var that = this, path = that._path || '';\n                if (value !== undefined) {\n                    that._path = value.replace(trimSlashesRegExp, '') + '/';\n                    that.dataSource.read({ path: that._path });\n                    return;\n                }\n                if (path) {\n                    path = path.replace(trimSlashesRegExp, '');\n                }\n                return path === '/' || path === '' ? '' : path + '/';\n            }\n        });\n        var SearchBox = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = options || {};\n                Widget.fn.init.call(that, element, options);\n                if (placeholderSupported) {\n                    that.element.attr('placeholder', that.options.label);\n                }\n                that._wrapper();\n                that.element.on('keydown' + SEARCHBOXNS, proxy(that._keydown, that)).on('change' + SEARCHBOXNS, proxy(that._updateValue, that));\n                that.wrapper.on(CLICK + SEARCHBOXNS, 'a', proxy(that._click, that));\n                if (!placeholderSupported) {\n                    that.element.on('focus' + SEARCHBOXNS, proxy(that._focus, that)).on('blur' + SEARCHBOXNS, proxy(that._blur, that));\n                }\n            },\n            options: {\n                name: 'SearchBox',\n                label: 'Search',\n                value: ''\n            },\n            events: [CHANGE],\n            destroy: function () {\n                var that = this;\n                that.wrapper.add(that.element).add(that.label).off(SEARCHBOXNS);\n                Widget.fn.destroy.call(that);\n            },\n            _keydown: function (e) {\n                if (e.keyCode === 13) {\n                    this._updateValue();\n                }\n            },\n            _click: function (e) {\n                e.preventDefault();\n                this._updateValue();\n            },\n            _updateValue: function () {\n                var that = this, value = that.element.val();\n                if (value !== that.value()) {\n                    that.value(value);\n                    that.trigger(CHANGE);\n                }\n            },\n            _blur: function () {\n                this._updateValue();\n                this._toggleLabel();\n            },\n            _toggleLabel: function () {\n                if (!placeholderSupported) {\n                    this.label.toggle(!this.element.val());\n                }\n            },\n            _focus: function () {\n                this.label.hide();\n            },\n            _wrapper: function () {\n                var element = this.element, wrapper = element.parents('.k-search-wrap');\n                element[0].style.width = '';\n                element.addClass('k-input');\n                if (!wrapper.length) {\n                    wrapper = element.wrap($('<div class=\"k-widget k-search-wrap k-textbox\"/>')).parent();\n                    if (!placeholderSupported) {\n                        $('<label style=\"display:block\">' + this.options.label + '</label>').insertBefore(element);\n                    }\n                    $('<a href=\"#\" class=\"k-icon k-i-search k-search\"/>').appendTo(wrapper);\n                }\n                this.wrapper = wrapper;\n                this.label = wrapper.find('>label');\n            },\n            value: function (value) {\n                var that = this;\n                if (value !== undefined) {\n                    that.options.value = value;\n                    that.element.val(value);\n                    that._toggleLabel();\n                    return;\n                }\n                return that.options.value;\n            }\n        });\n        var Breadcrumbs = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = options || {};\n                Widget.fn.init.call(that, element, options);\n                that._wrapper();\n                that.wrapper.on('focus' + BREADCRUBMSNS, 'input', proxy(that._focus, that)).on('blur' + BREADCRUBMSNS, 'input', proxy(that._blur, that)).on('keydown' + BREADCRUBMSNS, 'input', proxy(that._keydown, that)).on(CLICK + BREADCRUBMSNS, 'a.k-i-arrow-n:first', proxy(that._rootClick, that)).on(CLICK + BREADCRUBMSNS, 'a:not(.k-i-arrow-n)', proxy(that._click, that));\n                that.value(that.options.value);\n            },\n            options: {\n                name: 'Breadcrumbs',\n                gap: 50\n            },\n            events: [CHANGE],\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(that);\n                that.wrapper.add(that.wrapper.find('input')).add(that.wrapper.find('a')).off(BREADCRUBMSNS);\n            },\n            _update: function (val) {\n                val = (val || '').charAt(0) === '/' ? val : '/' + (val || '');\n                if (val !== this.value()) {\n                    this.value(val);\n                    this.trigger(CHANGE);\n                }\n            },\n            _click: function (e) {\n                e.preventDefault();\n                this._update(this._path($(e.target).prevAll('a:not(.k-i-arrow-n)').addBack()));\n            },\n            _rootClick: function (e) {\n                e.preventDefault();\n                this._update('');\n            },\n            _focus: function () {\n                var that = this, element = that.element;\n                that.overlay.hide();\n                that.element.val(that.value());\n                setTimeout(function () {\n                    element.select();\n                });\n            },\n            _blur: function () {\n                if (this.overlay.is(':visible')) {\n                    return;\n                }\n                var that = this, element = that.element, val = element.val().replace(/\\/{2,}/g, '/');\n                that.overlay.show();\n                element.val('');\n                that._update(val);\n            },\n            _keydown: function (e) {\n                var that = this;\n                if (e.keyCode === 13) {\n                    that._blur();\n                    setTimeout(function () {\n                        that.overlay.find('a:first').focus();\n                    });\n                }\n            },\n            _wrapper: function () {\n                var element = this.element, wrapper = element.parents('.k-breadcrumbs'), overlay;\n                element[0].style.width = '';\n                element.addClass('k-input');\n                if (!wrapper.length) {\n                    wrapper = element.wrap($('<div class=\"k-widget k-breadcrumbs k-textbox\"/>')).parent();\n                }\n                overlay = wrapper.find('.k-breadcrumbs-wrap');\n                if (!overlay.length) {\n                    overlay = $('<div class=\"k-breadcrumbs-wrap\"/>').appendTo(wrapper);\n                }\n                this.wrapper = wrapper;\n                this.overlay = overlay;\n            },\n            refresh: function () {\n                var html = '', value = this.value(), segments, segment, idx, length;\n                if (value === undefined || !value.match(/^\\//)) {\n                    value = '/' + (value || '');\n                }\n                segments = value.split('/');\n                for (idx = 0, length = segments.length; idx < length; idx++) {\n                    segment = segments[idx];\n                    if (segment) {\n                        if (!html) {\n                            html += '<a href=\"#\" class=\"k-icon k-i-arrow-n\">root</a>';\n                        }\n                        html += '<a class=\"k-link\" href=\"#\">' + segments[idx] + '</a>';\n                        html += '<span class=\"k-icon k-i-arrow-e\">&gt;</span>';\n                    }\n                }\n                this.overlay.empty().append($(html));\n                this._adjustSectionWidth();\n            },\n            _adjustSectionWidth: function () {\n                var that = this, wrapper = that.wrapper, width = wrapper.width() - that.options.gap, links = that.overlay.find('a'), a;\n                links.each(function (index) {\n                    a = $(this);\n                    if (a.parent().width() > width) {\n                        if (index == links.length - 1) {\n                            a.width(width);\n                        } else {\n                            a.prev().addBack().hide();\n                        }\n                    }\n                });\n            },\n            value: function (val) {\n                if (val !== undefined) {\n                    this._value = val.replace(/\\/{2,}/g, '/');\n                    this.refresh();\n                    return;\n                }\n                return this._value;\n            },\n            _path: function (trail) {\n                return '/' + $.map(trail, function (b) {\n                    return $(b).text();\n                }).join('/');\n            }\n        });\n        kendo.ui.plugin(FileBrowser);\n        kendo.ui.plugin(Breadcrumbs);\n        kendo.ui.plugin(SearchBox);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}