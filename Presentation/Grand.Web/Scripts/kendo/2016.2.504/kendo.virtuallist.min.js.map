{"version":3,"sources":["kendo.virtuallist.js"],"names":["f","define","$","undefined","lastFrom","array","length","toArray","value","Array","isPrimitive","dataItem","getItemCount","screenHeight","listScreens","itemHeight","Math","ceil","appendChild","parent","className","tagName","element","document","createElement","getDefaultItemHeight","lineHeight","mockList","css","position","left","visibility","appendTo","body","parseFloat","kendo","getComputedStyles","find","remove","bufferSizes","opposite","down","up","listValidator","options","downThreshold","threshold","upThreshold","list","scrollTop","lastScrollTop","top","scrollCallback","callback","force","syncList","reorder","items","index","y","support","browser","msie","version","style","webkitTransform","transform","map2","templates","arr1","arr2","i","len","item","this","trigger","ITEMCHANGE","data","ns","ui","reshift","diff","range","splice","push","apply","unshift","render","itemTemplate","template","placeholderTemplate","angular","elements","attr","uid","html","toggleClass","FOCUSED","current","SELECTED","selected","newGroup","GROUPITEM","groupTemplate","group","mapChangedItems","itemsToMatch","found","j","itemsLength","selectedLength","changed","unchanged","window","Widget","DataBoundWidget","proxy","WRAPPER","VIRTUALLIST","CONTENT","LIST","HEADER","VIRTUALITEM","ITEM","HEIGHTCONTAINER","HOVER","CHANGE","CLICK","LISTBOUND","ACTIVATE","DEACTIVATE","VIRTUAL_LIST_NS","VirtualList","extend","init","that","bound","_fetching","fn","call","addClass","content","wrap","wrapper","header","before","prev","on","removeClass","_values","_selectedDataItems","_selectedIndexes","_rangesList","_activeDeferred","_promisesList","_optionID","guid","setDataSource","dataSource","throttle","_renderItems","_triggerListBound","delay","_selectable","name","autoBind","height","oppositeBuffer","type","selectable","dataValueField","fixedGroupTemplate","valueMapper","events","setOptions","_selectProxy","off","refresh","_items","destroy","unbind","_refreshHandler","source","isArray","DataSource","create","_clean","_deferValueSet","mute","bind","setDSFilter","filter","view","fetch","skip","currentRangeStart","_selectingValue","_skip","_getValues","dataItems","getter","_valueGetter","map","e","result","action","isItemChange","filtered","isFiltered","_mute","focus","_createList","skipUpdateOnBind","done","removeAt","setValue","_forcePrefetch","slice","select","_valueDeferred","state","Deferred","_prefetchByValue","idx","dataView","_dataView","valueGetter","match","forSelection","Error","success","indexes","deferredRange","take","itemCount","ranges","defs","low","floor","high","pages","each","_","deferred","end","existingRange","_multiplePrefetch","resolve","when","then","prefetch","isEmptyList","rangeStart","_findDataItem","selectedDataItems","scrollTo","scrollToIndex","candidate","id","triggerEvent","flatView","isNaN","parseInt","_getElementByIndex","_focusedIndex","hasClass","removeAttr","_getElementLocation","focusIndex","focusFirst","focusLast","lastIndex","total","heightContainer","offsetHeight","focusPrev","focusNext","_triggerChange","removed","added","indices","isAlreadySelected","singleSelection","prefetchStarted","_getIndecies","_deselectCurrentValues","_deselect","_select","_listCreated","_lastDSFilter","Query","compareFilters","skipUpdate","noop","_lastScrollTop","empty","_height","hasData","_screenHeight","yPosition","yDownPostion","screenEnd","_templates","key","_generateItems","count","tabIndex","setAttribute","minHeight","_saveInitialRanges","_ranges","start","get","_buildValueGetter","_setHeight","hide","show","_getter","_onScroll","getList","_listItems","_fixedHeader","_whenChanged","_reorderList","_calculateGroupPadding","currentHeight","padHeight","innerHTML","min","lastRequestedRange","lastRangeStart","pageSize","flatGroups","flatGroup","groups","groupLength","inRange","_getterDeferred","reject","firstItemIndex","_indexConstraint","firstVisibleGroup","currentVisibleGroup","firstVisibleDataItemIndex","firstVisibleDataItem","_itemMapper","listType","currentIndex","_currentGroup","_range","_view","_getDataItemsCollection","_listIndex","theValidator","theNew","currentOffset","Infinity","list2","offset","range2","abs","_bufferSizes","max","buffers","jQuery","selectedIndex","selectedIndexes","removedindexesCounter","inArray","children","values","oldSkip","page","_clickHandler","currentTarget","isDefaultPrevented","firstItem","first","groupHeader","padding","display","scrollbar","plugin","amd","a1","a2","a3"],"mappings":"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","file":"kendo.virtuallist.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.virtuallist', ['kendo.data'], f);\n}(function () {\n    var __meta__ = {\n        id: 'virtuallist',\n        name: 'VirtualList',\n        category: 'framework',\n        depends: ['data'],\n        hidden: true\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, Widget = ui.Widget, DataBoundWidget = ui.DataBoundWidget, proxy = $.proxy, WRAPPER = 'k-virtual-wrap', VIRTUALLIST = 'k-virtual-list', CONTENT = 'k-virtual-content', LIST = 'k-list', HEADER = 'k-group-header', VIRTUALITEM = 'k-virtual-item', ITEM = 'k-item', HEIGHTCONTAINER = 'k-height-container', GROUPITEM = 'k-group', SELECTED = 'k-state-selected', FOCUSED = 'k-state-focused', HOVER = 'k-state-hover', CHANGE = 'change', CLICK = 'click', LISTBOUND = 'listBound', ITEMCHANGE = 'itemChange', ACTIVATE = 'activate', DEACTIVATE = 'deactivate', VIRTUAL_LIST_NS = '.VirtualList';\n        function lastFrom(array) {\n            return array[array.length - 1];\n        }\n        function toArray(value) {\n            return value instanceof Array ? value : [value];\n        }\n        function isPrimitive(dataItem) {\n            return typeof dataItem === 'string' || typeof dataItem === 'number' || typeof dataItem === 'boolean';\n        }\n        function getItemCount(screenHeight, listScreens, itemHeight) {\n            return Math.ceil(screenHeight * listScreens / itemHeight);\n        }\n        function appendChild(parent, className, tagName) {\n            var element = document.createElement(tagName || 'div');\n            if (className) {\n                element.className = className;\n            }\n            parent.appendChild(element);\n            return element;\n        }\n        function getDefaultItemHeight() {\n            var mockList = $('<div class=\"k-popup\"><ul class=\"k-list\"><li class=\"k-item\"><li></ul></div>'), lineHeight;\n            mockList.css({\n                position: 'absolute',\n                left: '-200000px',\n                visibility: 'hidden'\n            });\n            mockList.appendTo(document.body);\n            lineHeight = parseFloat(kendo.getComputedStyles(mockList.find('.k-item')[0], ['line-height'])['line-height']);\n            mockList.remove();\n            return lineHeight;\n        }\n        function bufferSizes(screenHeight, listScreens, opposite) {\n            return {\n                down: screenHeight * opposite,\n                up: screenHeight * (listScreens - 1 - opposite)\n            };\n        }\n        function listValidator(options, screenHeight) {\n            var downThreshold = (options.listScreens - 1 - options.threshold) * screenHeight;\n            var upThreshold = options.threshold * screenHeight;\n            return function (list, scrollTop, lastScrollTop) {\n                if (scrollTop > lastScrollTop) {\n                    return scrollTop - list.top < downThreshold;\n                } else {\n                    return list.top === 0 || scrollTop - list.top > upThreshold;\n                }\n            };\n        }\n        function scrollCallback(element, callback) {\n            return function (force) {\n                return callback(element.scrollTop, force);\n            };\n        }\n        function syncList(reorder) {\n            return function (list, force) {\n                reorder(list.items, list.index, force);\n                return list;\n            };\n        }\n        function position(element, y) {\n            if (kendo.support.browser.msie && kendo.support.browser.version < 10) {\n                element.style.top = y + 'px';\n            } else {\n                element.style.webkitTransform = 'translateY(' + y + 'px)';\n                element.style.transform = 'translateY(' + y + 'px)';\n            }\n        }\n        function map2(callback, templates) {\n            return function (arr1, arr2) {\n                for (var i = 0, len = arr1.length; i < len; i++) {\n                    callback(arr1[i], arr2[i], templates);\n                    if (arr2[i].item) {\n                        this.trigger(ITEMCHANGE, {\n                            item: $(arr1[i]),\n                            data: arr2[i].item,\n                            ns: kendo.ui\n                        });\n                    }\n                }\n            };\n        }\n        function reshift(items, diff) {\n            var range;\n            if (diff > 0) {\n                range = items.splice(0, diff);\n                items.push.apply(items, range);\n            } else {\n                range = items.splice(diff, -diff);\n                items.unshift.apply(items, range);\n            }\n            return range;\n        }\n        function render(element, data, templates) {\n            var itemTemplate = templates.template;\n            element = $(element);\n            if (!data.item) {\n                itemTemplate = templates.placeholderTemplate;\n            }\n            this.angular('cleanup', function () {\n                return { elements: [element] };\n            });\n            element.attr('data-uid', data.item ? data.item.uid : '').attr('data-offset-index', data.index).html(itemTemplate(data.item || {}));\n            element.toggleClass(FOCUSED, data.current);\n            element.toggleClass(SELECTED, data.selected);\n            element.toggleClass('k-first', data.newGroup);\n            element.toggleClass('k-loading-item', !data.item);\n            if (data.index !== 0 && data.newGroup) {\n                $('<div class=' + GROUPITEM + '></div>').appendTo(element).html(templates.groupTemplate(data.group));\n            }\n            if (data.top !== undefined) {\n                position(element[0], data.top);\n            }\n            this.angular('compile', function () {\n                return {\n                    elements: [element],\n                    data: [{\n                            dataItem: data.item,\n                            group: data.group,\n                            newGroup: data.newGroup\n                        }]\n                };\n            });\n        }\n        function mapChangedItems(selected, itemsToMatch) {\n            var itemsLength = itemsToMatch.length;\n            var selectedLength = selected.length;\n            var dataItem;\n            var found;\n            var i, j;\n            var changed = [];\n            var unchanged = [];\n            if (selectedLength) {\n                for (i = 0; i < selectedLength; i++) {\n                    dataItem = selected[i];\n                    found = false;\n                    for (j = 0; j < itemsLength; j++) {\n                        if (dataItem === itemsToMatch[j]) {\n                            found = true;\n                            changed.push({\n                                index: i,\n                                item: dataItem\n                            });\n                            break;\n                        }\n                    }\n                    if (!found) {\n                        unchanged.push(dataItem);\n                    }\n                }\n            }\n            return {\n                changed: changed,\n                unchanged: unchanged\n            };\n        }\n        var VirtualList = DataBoundWidget.extend({\n            init: function (element, options) {\n                var that = this;\n                that.bound(false);\n                that._fetching = false;\n                Widget.fn.init.call(that, element, options);\n                if (!that.options.itemHeight) {\n                    that.options.itemHeight = getDefaultItemHeight();\n                }\n                options = that.options;\n                that.element.addClass(LIST + ' ' + VIRTUALLIST).attr('role', 'listbox');\n                that.content = that.element.wrap('<div unselectable=\\'on\\' class=\\'' + CONTENT + '\\'></div>').parent();\n                that.wrapper = that.content.wrap('<div class=\\'' + WRAPPER + '\\'></div>').parent();\n                that.header = that.content.before('<div class=\\'' + HEADER + '\\'></div>').prev();\n                that.element.on('mouseenter' + VIRTUAL_LIST_NS, 'li:not(.k-loading-item)', function () {\n                    $(this).addClass(HOVER);\n                }).on('mouseleave' + VIRTUAL_LIST_NS, 'li', function () {\n                    $(this).removeClass(HOVER);\n                });\n                that._values = toArray(that.options.value);\n                that._selectedDataItems = [];\n                that._selectedIndexes = [];\n                that._rangesList = {};\n                that._activeDeferred = null;\n                that._promisesList = [];\n                that._optionID = kendo.guid();\n                that.setDataSource(options.dataSource);\n                that.content.on('scroll' + VIRTUAL_LIST_NS, kendo.throttle(function () {\n                    that._renderItems();\n                    that._triggerListBound();\n                }, options.delay));\n                that._selectable();\n            },\n            options: {\n                name: 'VirtualList',\n                autoBind: true,\n                delay: 100,\n                height: null,\n                listScreens: 4,\n                threshold: 0.5,\n                itemHeight: null,\n                oppositeBuffer: 1,\n                type: 'flat',\n                selectable: false,\n                value: [],\n                dataValueField: null,\n                template: '#:data#',\n                placeholderTemplate: 'loading...',\n                groupTemplate: '#:data#',\n                fixedGroupTemplate: 'fixed header template',\n                valueMapper: null\n            },\n            events: [\n                CHANGE,\n                CLICK,\n                LISTBOUND,\n                ITEMCHANGE,\n                ACTIVATE,\n                DEACTIVATE\n            ],\n            setOptions: function (options) {\n                Widget.fn.setOptions.call(this, options);\n                if (this._selectProxy && this.options.selectable === false) {\n                    this.element.off(CLICK, '.' + VIRTUALITEM, this._selectProxy);\n                } else if (!this._selectProxy && this.options.selectable) {\n                    this._selectable();\n                }\n                this.refresh();\n            },\n            items: function () {\n                return $(this._items);\n            },\n            destroy: function () {\n                this.wrapper.off(VIRTUAL_LIST_NS);\n                this.dataSource.unbind(CHANGE, this._refreshHandler);\n                Widget.fn.destroy.call(this);\n            },\n            setDataSource: function (source) {\n                var that = this;\n                var dataSource = source || {};\n                var value;\n                dataSource = $.isArray(dataSource) ? { data: dataSource } : dataSource;\n                dataSource = kendo.data.DataSource.create(dataSource);\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                    that._clean();\n                    that.bound(false);\n                    that._deferValueSet = true;\n                    value = that.value();\n                    that.value([]);\n                    that.mute(function () {\n                        that.value(value);\n                    });\n                } else {\n                    that._refreshHandler = $.proxy(that.refresh, that);\n                }\n                that.dataSource = dataSource.bind(CHANGE, that._refreshHandler);\n                that.setDSFilter(dataSource.filter());\n                if (dataSource.view().length !== 0) {\n                    that.refresh();\n                } else if (that.options.autoBind) {\n                    dataSource.fetch();\n                }\n            },\n            skip: function () {\n                return this.dataSource.currentRangeStart();\n            },\n            _triggerListBound: function () {\n                var that = this;\n                var skip = that.skip();\n                if (that.bound() && !that._selectingValue && that._skip !== skip) {\n                    that._skip = skip;\n                    that.trigger(LISTBOUND);\n                }\n            },\n            _getValues: function (dataItems) {\n                var getter = this._valueGetter;\n                return $.map(dataItems, function (dataItem) {\n                    return getter(dataItem);\n                });\n            },\n            refresh: function (e) {\n                var that = this;\n                var action = e && e.action;\n                var isItemChange = action === 'itemchange';\n                var filtered = this.isFiltered();\n                var result;\n                if (that._mute) {\n                    return;\n                }\n                that._deferValueSet = false;\n                if (!that._fetching) {\n                    if (filtered) {\n                        that.focus(0);\n                    }\n                    that._createList();\n                    if (!action && that._values.length && !filtered && !that.options.skipUpdateOnBind) {\n                        that._selectingValue = true;\n                        that.value(that._values, true).done(function () {\n                            that.bound(true);\n                            that._selectingValue = false;\n                            that._triggerListBound();\n                        });\n                    } else {\n                        that.bound(true);\n                        that._triggerListBound();\n                    }\n                } else {\n                    if (that._renderItems) {\n                        that._renderItems(true);\n                    }\n                    that._triggerListBound();\n                }\n                if (isItemChange || action === 'remove') {\n                    result = mapChangedItems(that._selectedDataItems, e.items);\n                    if (result.changed.length) {\n                        if (isItemChange) {\n                            that.trigger('selectedItemChange', { items: result.changed });\n                        } else {\n                            that.value(that._getValues(result.unchanged));\n                        }\n                    }\n                }\n                that._fetching = false;\n            },\n            removeAt: function (position) {\n                this._selectedIndexes.splice(position, 1);\n                this._values.splice(position, 1);\n                return {\n                    position: position,\n                    dataItem: this._selectedDataItems.splice(position, 1)[0]\n                };\n            },\n            setValue: function (value) {\n                this._values = toArray(value);\n            },\n            value: function (value, _forcePrefetch) {\n                var that = this;\n                if (value === undefined) {\n                    return that._values.slice();\n                }\n                if (value === null) {\n                    value = [];\n                }\n                value = toArray(value);\n                if (that.options.selectable === 'multiple' && that.select().length && value.length) {\n                    that.select(-1);\n                }\n                if (!that._valueDeferred || that._valueDeferred.state() === 'resolved') {\n                    that._valueDeferred = $.Deferred();\n                }\n                if (!value.length) {\n                    that.select(-1);\n                }\n                that._values = value;\n                if (that.bound() && !that._mute && !that._deferValueSet || _forcePrefetch) {\n                    that._prefetchByValue(value);\n                }\n                return that._valueDeferred;\n            },\n            _prefetchByValue: function (value) {\n                var that = this, dataView = that._dataView, valueGetter = that._valueGetter, item, match = false, forSelection = [];\n                for (var i = 0; i < value.length; i++) {\n                    for (var idx = 0; idx < dataView.length; idx++) {\n                        item = dataView[idx].item;\n                        if (item) {\n                            match = isPrimitive(item) ? value[i] === item : value[i] === valueGetter(item);\n                            if (match) {\n                                forSelection.push(dataView[idx].index);\n                            }\n                        }\n                    }\n                }\n                if (forSelection.length === value.length) {\n                    that._values = [];\n                    that.select(forSelection);\n                    return;\n                }\n                if (typeof that.options.valueMapper === 'function') {\n                    that.options.valueMapper({\n                        value: this.options.selectable === 'multiple' ? value : value[0],\n                        success: function (indexes) {\n                            that._values = [];\n                            that._selectedIndexes = [];\n                            that._selectedDataItems = [];\n                            indexes = toArray(indexes);\n                            if (!indexes.length) {\n                                indexes = [-1];\n                            }\n                            that.select(indexes);\n                        }\n                    });\n                } else {\n                    throw new Error('valueMapper is not provided');\n                }\n            },\n            deferredRange: function (index) {\n                var dataSource = this.dataSource;\n                var take = this.itemCount;\n                var ranges = this._rangesList;\n                var result = $.Deferred();\n                var defs = [];\n                var low = Math.floor(index / take) * take;\n                var high = Math.ceil(index / take) * take;\n                var pages = high === low ? [high] : [\n                    low,\n                    high\n                ];\n                $.each(pages, function (_, skip) {\n                    var end = skip + take;\n                    var existingRange = ranges[skip];\n                    var deferred;\n                    if (!existingRange || existingRange.end !== end) {\n                        deferred = $.Deferred();\n                        ranges[skip] = {\n                            end: end,\n                            deferred: deferred\n                        };\n                        dataSource._multiplePrefetch(skip, take, function () {\n                            deferred.resolve();\n                        });\n                    } else {\n                        deferred = existingRange.deferred;\n                    }\n                    defs.push(deferred);\n                });\n                $.when.apply($, defs).then(function () {\n                    result.resolve();\n                });\n                return result;\n            },\n            prefetch: function (indexes) {\n                var that = this, take = this.itemCount, isEmptyList = !that._promisesList.length;\n                if (!that._activeDeferred) {\n                    that._activeDeferred = $.Deferred();\n                    that._promisesList = [];\n                }\n                $.each(indexes, function (_, index) {\n                    var rangeStart = Math.floor(index / take) * take;\n                    that._promisesList.push(that.deferredRange(rangeStart));\n                });\n                if (isEmptyList) {\n                    $.when.apply($, that._promisesList).done(function () {\n                        that._activeDeferred.resolve();\n                        that._activeDeferred = null;\n                        that._promisesList = [];\n                    });\n                }\n                return that._activeDeferred;\n            },\n            _findDataItem: function (index) {\n                var view = this.dataSource.view(), group;\n                if (this.options.type === 'group') {\n                    for (var i = 0; i < view.length; i++) {\n                        group = view[i].items;\n                        if (group.length <= index) {\n                            index = index - group.length;\n                        } else {\n                            return group[index];\n                        }\n                    }\n                }\n                return view[index];\n            },\n            selectedDataItems: function () {\n                return this._selectedDataItems.slice();\n            },\n            scrollTo: function (y) {\n                this.content.scrollTop(y);\n            },\n            scrollToIndex: function (index) {\n                this.scrollTo(index * this.options.itemHeight);\n            },\n            focus: function (candidate) {\n                var element, index, data, current, itemHeight = this.options.itemHeight, id = this._optionID, triggerEvent = true;\n                if (candidate === undefined) {\n                    current = this.element.find('.' + FOCUSED);\n                    return current.length ? current : null;\n                }\n                if (typeof candidate === 'function') {\n                    data = this.dataSource.flatView();\n                    for (var idx = 0; idx < data.length; idx++) {\n                        if (candidate(data[idx])) {\n                            candidate = idx;\n                            break;\n                        }\n                    }\n                }\n                if (candidate instanceof Array) {\n                    candidate = lastFrom(candidate);\n                }\n                if (isNaN(candidate)) {\n                    element = $(candidate);\n                    index = parseInt($(element).attr('data-offset-index'), 10);\n                } else {\n                    index = candidate;\n                    element = this._getElementByIndex(index);\n                }\n                if (index === -1) {\n                    this.element.find('.' + FOCUSED).removeClass(FOCUSED);\n                    this._focusedIndex = undefined;\n                    return;\n                }\n                if (element.length) {\n                    if (element.hasClass(FOCUSED)) {\n                        triggerEvent = false;\n                    }\n                    if (this._focusedIndex !== undefined) {\n                        current = this._getElementByIndex(this._focusedIndex);\n                        current.removeClass(FOCUSED).removeAttr('id');\n                        if (triggerEvent) {\n                            this.trigger(DEACTIVATE);\n                        }\n                    }\n                    this._focusedIndex = index;\n                    element.addClass(FOCUSED).attr('id', id);\n                    var position = this._getElementLocation(index);\n                    if (position === 'top') {\n                        this.scrollTo(index * itemHeight);\n                    } else if (position === 'bottom') {\n                        this.scrollTo(index * itemHeight + itemHeight - this.screenHeight);\n                    } else if (position === 'outScreen') {\n                        this.scrollTo(index * itemHeight);\n                    }\n                    if (triggerEvent) {\n                        this.trigger(ACTIVATE);\n                    }\n                } else {\n                    this._focusedIndex = index;\n                    this.items().removeClass(FOCUSED);\n                    this.scrollToIndex(index);\n                }\n            },\n            focusIndex: function () {\n                return this._focusedIndex;\n            },\n            focusFirst: function () {\n                this.scrollTo(0);\n                this.focus(0);\n            },\n            focusLast: function () {\n                var lastIndex = this.dataSource.total();\n                this.scrollTo(this.heightContainer.offsetHeight);\n                this.focus(lastIndex);\n            },\n            focusPrev: function () {\n                var index = this._focusedIndex;\n                var current;\n                if (!isNaN(index) && index > 0) {\n                    index -= 1;\n                    this.focus(index);\n                    current = this.focus();\n                    if (current && current.hasClass('k-loading-item')) {\n                        index += 1;\n                        this.focus(index);\n                    }\n                    return index;\n                } else {\n                    index = this.dataSource.total() - 1;\n                    this.focus(index);\n                    return index;\n                }\n            },\n            focusNext: function () {\n                var index = this._focusedIndex;\n                var lastIndex = this.dataSource.total() - 1;\n                var current;\n                if (!isNaN(index) && index < lastIndex) {\n                    index += 1;\n                    this.focus(index);\n                    current = this.focus();\n                    if (current && current.hasClass('k-loading-item')) {\n                        index -= 1;\n                        this.focus(index);\n                    }\n                    return index;\n                } else {\n                    index = 0;\n                    this.focus(index);\n                    return index;\n                }\n            },\n            _triggerChange: function (removed, added) {\n                removed = removed || [];\n                added = added || [];\n                if (removed.length || added.length) {\n                    this.trigger(CHANGE, {\n                        removed: removed,\n                        added: added\n                    });\n                }\n            },\n            select: function (candidate) {\n                var that = this, indices, singleSelection = that.options.selectable !== 'multiple', prefetchStarted = !!that._activeDeferred, filtered = this.isFiltered(), isAlreadySelected, deferred, result, removed = [];\n                if (candidate === undefined) {\n                    return that._selectedIndexes.slice();\n                }\n                indices = that._getIndecies(candidate);\n                isAlreadySelected = singleSelection && !filtered && lastFrom(indices) === lastFrom(this._selectedIndexes);\n                removed = that._deselectCurrentValues(indices);\n                if (removed.length || !indices.length || isAlreadySelected) {\n                    that._triggerChange(removed);\n                    if (that._valueDeferred) {\n                        that._valueDeferred.resolve();\n                    }\n                    return;\n                }\n                if (indices.length === 1 && indices[0] === -1) {\n                    indices = [];\n                }\n                result = that._deselect(indices);\n                removed = result.removed;\n                indices = result.indices;\n                if (singleSelection) {\n                    that._activeDeferred = null;\n                    prefetchStarted = false;\n                    if (indices.length) {\n                        indices = [lastFrom(indices)];\n                    }\n                }\n                var done = function () {\n                    var added = that._select(indices);\n                    that.focus(indices);\n                    that._triggerChange(removed, added);\n                    if (that._valueDeferred) {\n                        that._valueDeferred.resolve();\n                    }\n                };\n                deferred = that.prefetch(indices);\n                if (!prefetchStarted) {\n                    if (deferred) {\n                        deferred.done(done);\n                    } else {\n                        done();\n                    }\n                }\n            },\n            bound: function (bound) {\n                if (bound === undefined) {\n                    return this._listCreated;\n                }\n                this._listCreated = bound;\n            },\n            mute: function (callback) {\n                this._mute = true;\n                proxy(callback(), this);\n                this._mute = false;\n            },\n            setDSFilter: function (filter) {\n                this._lastDSFilter = $.extend({}, filter);\n            },\n            isFiltered: function () {\n                if (!this._lastDSFilter) {\n                    this.setDSFilter(this.dataSource.filter());\n                }\n                return !kendo.data.Query.compareFilters(this.dataSource.filter(), this._lastDSFilter);\n            },\n            skipUpdate: $.noop,\n            _getElementByIndex: function (index) {\n                return this.items().filter(function (idx, element) {\n                    return index === parseInt($(element).attr('data-offset-index'), 10);\n                });\n            },\n            _clean: function () {\n                this.result = undefined;\n                this._lastScrollTop = undefined;\n                this._skip = undefined;\n                $(this.heightContainer).remove();\n                this.heightContainer = undefined;\n                this.element.empty();\n            },\n            _height: function () {\n                var hasData = !!this.dataSource.view().length, height = this.options.height, itemHeight = this.options.itemHeight, total = this.dataSource.total();\n                if (!hasData) {\n                    height = 0;\n                } else if (height / itemHeight > total) {\n                    height = total * itemHeight;\n                }\n                return height;\n            },\n            _screenHeight: function () {\n                var height = this._height(), content = this.content;\n                content.height(height);\n                this.screenHeight = height;\n            },\n            _getElementLocation: function (index) {\n                var scrollTop = this.content.scrollTop(), screenHeight = this.screenHeight, itemHeight = this.options.itemHeight, yPosition = index * itemHeight, yDownPostion = yPosition + itemHeight, screenEnd = scrollTop + screenHeight, position;\n                if (yPosition === scrollTop - itemHeight || yDownPostion > scrollTop && yPosition < scrollTop) {\n                    position = 'top';\n                } else if (yPosition === screenEnd || yPosition < screenEnd && screenEnd < yDownPostion) {\n                    position = 'bottom';\n                } else if (yPosition >= scrollTop && yPosition <= scrollTop + (screenHeight - itemHeight)) {\n                    position = 'inScreen';\n                } else {\n                    position = 'outScreen';\n                }\n                return position;\n            },\n            _templates: function () {\n                var templates = {\n                    template: this.options.template,\n                    placeholderTemplate: this.options.placeholderTemplate,\n                    groupTemplate: this.options.groupTemplate,\n                    fixedGroupTemplate: this.options.fixedGroupTemplate\n                };\n                for (var key in templates) {\n                    if (typeof templates[key] !== 'function') {\n                        templates[key] = kendo.template(templates[key]);\n                    }\n                }\n                this.templates = templates;\n            },\n            _generateItems: function (element, count) {\n                var items = [], item, itemHeight = this.options.itemHeight + 'px';\n                while (count-- > 0) {\n                    item = document.createElement('li');\n                    item.tabIndex = -1;\n                    item.className = VIRTUALITEM + ' ' + ITEM;\n                    item.setAttribute('role', 'option');\n                    item.style.height = itemHeight;\n                    item.style.minHeight = itemHeight;\n                    element.appendChild(item);\n                    items.push(item);\n                }\n                return items;\n            },\n            _saveInitialRanges: function () {\n                var ranges = this.dataSource._ranges;\n                var deferred = $.Deferred();\n                deferred.resolve();\n                this._rangesList = {};\n                for (var i = 0; i < ranges.length; i++) {\n                    this._rangesList[ranges[i].start] = {\n                        end: ranges[i].end,\n                        deferred: deferred\n                    };\n                }\n            },\n            _createList: function () {\n                var that = this, content = that.content.get(0), options = that.options, dataSource = that.dataSource;\n                if (that.bound()) {\n                    that._clean();\n                }\n                that._saveInitialRanges();\n                that._screenHeight();\n                that._buildValueGetter();\n                that.itemCount = getItemCount(that.screenHeight, options.listScreens, options.itemHeight);\n                if (that.itemCount > dataSource.total()) {\n                    that.itemCount = dataSource.total();\n                }\n                that._templates();\n                that._items = that._generateItems(that.element[0], that.itemCount);\n                that._setHeight(options.itemHeight * dataSource.total());\n                that.options.type = (dataSource.group() || []).length ? 'group' : 'flat';\n                if (that.options.type === 'flat') {\n                    that.header.hide();\n                } else {\n                    that.header.show();\n                }\n                that.getter = that._getter(function () {\n                    that._renderItems(true);\n                });\n                that._onScroll = function (scrollTop, force) {\n                    var getList = that._listItems(that.getter);\n                    return that._fixedHeader(scrollTop, getList(scrollTop, force));\n                };\n                that._renderItems = that._whenChanged(scrollCallback(content, that._onScroll), syncList(that._reorderList(that._items, $.proxy(render, that))));\n                that._renderItems();\n                that._calculateGroupPadding(that.screenHeight);\n            },\n            _setHeight: function (height) {\n                var currentHeight, heightContainer = this.heightContainer;\n                if (!heightContainer) {\n                    heightContainer = this.heightContainer = appendChild(this.content[0], HEIGHTCONTAINER);\n                } else {\n                    currentHeight = heightContainer.offsetHeight;\n                }\n                if (height !== currentHeight) {\n                    heightContainer.innerHTML = '';\n                    while (height > 0) {\n                        var padHeight = Math.min(height, 250000);\n                        appendChild(heightContainer).style.height = padHeight + 'px';\n                        height -= padHeight;\n                    }\n                }\n            },\n            _getter: function () {\n                var lastRequestedRange = null, dataSource = this.dataSource, lastRangeStart = dataSource.skip(), type = this.options.type, pageSize = this.itemCount, flatGroups = {};\n                if (dataSource.pageSize() < pageSize) {\n                    this.mute(function () {\n                        dataSource.pageSize(pageSize);\n                    });\n                }\n                return function (index, rangeStart) {\n                    var that = this;\n                    if (!dataSource.inRange(rangeStart, pageSize)) {\n                        if (lastRequestedRange !== rangeStart) {\n                            lastRequestedRange = rangeStart;\n                            lastRangeStart = rangeStart;\n                            if (that._getterDeferred) {\n                                that._getterDeferred.reject();\n                            }\n                            that._getterDeferred = that.deferredRange(rangeStart);\n                            that._getterDeferred.then(function () {\n                                var firstItemIndex = that._indexConstraint(that.content[0].scrollTop);\n                                that._getterDeferred = null;\n                                if (rangeStart <= firstItemIndex && firstItemIndex <= rangeStart + pageSize) {\n                                    that._fetching = true;\n                                    dataSource.range(rangeStart, pageSize);\n                                }\n                            });\n                        }\n                        return null;\n                    } else {\n                        if (lastRangeStart !== rangeStart) {\n                            this.mute(function () {\n                                dataSource.range(rangeStart, pageSize);\n                                lastRangeStart = rangeStart;\n                            });\n                        }\n                        var result;\n                        if (type === 'group') {\n                            if (!flatGroups[rangeStart]) {\n                                var flatGroup = flatGroups[rangeStart] = [];\n                                var groups = dataSource.view();\n                                for (var i = 0, len = groups.length; i < len; i++) {\n                                    var group = groups[i];\n                                    for (var j = 0, groupLength = group.items.length; j < groupLength; j++) {\n                                        flatGroup.push({\n                                            item: group.items[j],\n                                            group: group.value\n                                        });\n                                    }\n                                }\n                            }\n                            result = flatGroups[rangeStart][index - rangeStart];\n                        } else {\n                            result = dataSource.view()[index - rangeStart];\n                        }\n                        return result;\n                    }\n                };\n            },\n            _fixedHeader: function (scrollTop, list) {\n                var group = this.currentVisibleGroup, itemHeight = this.options.itemHeight, firstVisibleDataItemIndex = Math.floor((scrollTop - list.top) / itemHeight), firstVisibleDataItem = list.items[firstVisibleDataItemIndex];\n                if (firstVisibleDataItem && firstVisibleDataItem.item) {\n                    var firstVisibleGroup = firstVisibleDataItem.group;\n                    if (firstVisibleGroup !== group) {\n                        this.header[0].innerHTML = firstVisibleGroup || '';\n                        this.currentVisibleGroup = firstVisibleGroup;\n                    }\n                }\n                return list;\n            },\n            _itemMapper: function (item, index, value) {\n                var listType = this.options.type, itemHeight = this.options.itemHeight, currentIndex = this._focusedIndex, selected = false, current = false, newGroup = false, group = null, match = false, valueGetter = this._valueGetter;\n                if (listType === 'group') {\n                    if (item) {\n                        newGroup = index === 0 || this._currentGroup && this._currentGroup !== item.group;\n                        this._currentGroup = item.group;\n                    }\n                    group = item ? item.group : null;\n                    item = item ? item.item : null;\n                }\n                if (!this.isFiltered() && value.length && item) {\n                    for (var i = 0; i < value.length; i++) {\n                        match = isPrimitive(item) ? value[i] === item : value[i] === valueGetter(item);\n                        if (match) {\n                            value.splice(i, 1);\n                            selected = true;\n                            break;\n                        }\n                    }\n                }\n                if (currentIndex === index) {\n                    current = true;\n                }\n                return {\n                    item: item ? item : null,\n                    group: group,\n                    newGroup: newGroup,\n                    selected: selected,\n                    current: current,\n                    index: index,\n                    top: index * itemHeight\n                };\n            },\n            _range: function (index) {\n                var itemCount = this.itemCount, value = this._values.slice(), items = [], item;\n                this._view = {};\n                this._currentGroup = null;\n                for (var i = index, length = index + itemCount; i < length; i++) {\n                    item = this._itemMapper(this.getter(i, index), i, value);\n                    items.push(item);\n                    this._view[item.index] = item;\n                }\n                this._dataView = items;\n                return items;\n            },\n            _getDataItemsCollection: function (scrollTop, lastScrollTop) {\n                var items = this._range(this._listIndex(scrollTop, lastScrollTop));\n                return {\n                    index: items.length ? items[0].index : 0,\n                    top: items.length ? items[0].top : 0,\n                    items: items\n                };\n            },\n            _listItems: function () {\n                var screenHeight = this.screenHeight, options = this.options;\n                var theValidator = listValidator(options, screenHeight);\n                return $.proxy(function (value, force) {\n                    var result = this.result, lastScrollTop = this._lastScrollTop;\n                    if (force || !result || !theValidator(result, value, lastScrollTop)) {\n                        result = this._getDataItemsCollection(value, lastScrollTop);\n                    }\n                    this._lastScrollTop = value;\n                    this.result = result;\n                    return result;\n                }, this);\n            },\n            _whenChanged: function (getter, callback) {\n                var current;\n                return function (force) {\n                    var theNew = getter(force);\n                    if (theNew !== current) {\n                        current = theNew;\n                        callback(theNew, force);\n                    }\n                };\n            },\n            _reorderList: function (list, reorder) {\n                var that = this;\n                var length = list.length;\n                var currentOffset = -Infinity;\n                reorder = $.proxy(map2(reorder, this.templates), this);\n                return function (list2, offset, force) {\n                    var diff = offset - currentOffset;\n                    var range, range2;\n                    if (force || Math.abs(diff) >= length) {\n                        range = list;\n                        range2 = list2;\n                    } else {\n                        range = reshift(list, diff);\n                        range2 = diff > 0 ? list2.slice(-diff) : list2.slice(0, -diff);\n                    }\n                    reorder(range, range2, that.bound());\n                    currentOffset = offset;\n                };\n            },\n            _bufferSizes: function () {\n                var options = this.options;\n                return bufferSizes(this.screenHeight, options.listScreens, options.oppositeBuffer);\n            },\n            _indexConstraint: function (position) {\n                var itemCount = this.itemCount, itemHeight = this.options.itemHeight, total = this.dataSource.total();\n                return Math.min(Math.max(total - itemCount, 0), Math.max(0, Math.floor(position / itemHeight)));\n            },\n            _listIndex: function (scrollTop, lastScrollTop) {\n                var buffers = this._bufferSizes(), position;\n                position = scrollTop - (scrollTop > lastScrollTop ? buffers.down : buffers.up);\n                return this._indexConstraint(position);\n            },\n            _selectable: function () {\n                if (this.options.selectable) {\n                    this._selectProxy = $.proxy(this, '_clickHandler');\n                    this.element.on(CLICK + VIRTUAL_LIST_NS, '.' + VIRTUALITEM, this._selectProxy);\n                }\n            },\n            _getIndecies: function (candidate) {\n                var result = [], data;\n                if (typeof candidate === 'function') {\n                    data = this.dataSource.flatView();\n                    for (var idx = 0; idx < data.length; idx++) {\n                        if (candidate(data[idx])) {\n                            result.push(idx);\n                            break;\n                        }\n                    }\n                }\n                if (typeof candidate === 'number') {\n                    result.push(candidate);\n                }\n                if (candidate instanceof jQuery) {\n                    candidate = parseInt(candidate.attr('data-offset-index'), 10);\n                    if (!isNaN(candidate)) {\n                        result.push(candidate);\n                    }\n                }\n                if (candidate instanceof Array) {\n                    result = candidate;\n                }\n                return result;\n            },\n            _deselect: function (indices) {\n                var removed = [], selectedIndex, dataItem, selectedIndexes = this._selectedIndexes, position = 0, selectable = this.options.selectable, removedindexesCounter = 0, item;\n                indices = indices.slice();\n                if (selectable === true || !indices.length) {\n                    for (var idx = 0; idx < selectedIndexes.length; idx++) {\n                        if (selectedIndexes[idx] !== undefined) {\n                            this._getElementByIndex(selectedIndexes[idx]).removeClass(SELECTED);\n                            removed.push({\n                                index: selectedIndexes[idx],\n                                position: idx,\n                                dataItem: this._selectedDataItems[idx]\n                            });\n                        }\n                    }\n                    this._values = [];\n                    this._selectedDataItems = [];\n                    this._selectedIndexes = [];\n                } else if (selectable === 'multiple') {\n                    for (var i = 0; i < indices.length; i++) {\n                        position = $.inArray(indices[i], selectedIndexes);\n                        selectedIndex = selectedIndexes[position];\n                        if (selectedIndex !== undefined) {\n                            item = this._getElementByIndex(selectedIndex);\n                            if (!item.hasClass('k-state-selected')) {\n                                continue;\n                            }\n                            item.removeClass(SELECTED);\n                            this._values.splice(position, 1);\n                            this._selectedIndexes.splice(position, 1);\n                            dataItem = this._selectedDataItems.splice(position, 1)[0];\n                            indices.splice(i, 1);\n                            removed.push({\n                                index: selectedIndex,\n                                position: position + removedindexesCounter,\n                                dataItem: dataItem\n                            });\n                            removedindexesCounter++;\n                            i--;\n                        }\n                    }\n                }\n                return {\n                    indices: indices,\n                    removed: removed\n                };\n            },\n            _deselectCurrentValues: function (indices) {\n                var children = this.element[0].children;\n                var value, index, position;\n                var values = this._values;\n                var removed = [];\n                var idx = 0;\n                var j;\n                if (this.options.selectable !== 'multiple' || !this.isFiltered()) {\n                    return [];\n                }\n                for (; idx < indices.length; idx++) {\n                    position = -1;\n                    index = indices[idx];\n                    value = this._valueGetter(this._view[index].item);\n                    for (j = 0; j < values.length; j++) {\n                        if (value == values[j]) {\n                            position = j;\n                            break;\n                        }\n                    }\n                    if (position > -1) {\n                        removed.push(this.removeAt(position));\n                        $(children[index]).removeClass('k-state-selected');\n                    }\n                }\n                return removed;\n            },\n            _select: function (indexes) {\n                var that = this, singleSelection = this.options.selectable !== 'multiple', dataSource = this.dataSource, dataItem, oldSkip, take = this.itemCount, valueGetter = this._valueGetter, added = [];\n                if (singleSelection) {\n                    that._selectedIndexes = [];\n                    that._selectedDataItems = [];\n                    that._values = [];\n                }\n                oldSkip = dataSource.skip();\n                $.each(indexes, function (_, index) {\n                    var page = index < take ? 1 : Math.floor(index / take) + 1;\n                    var skip = (page - 1) * take;\n                    that.mute(function () {\n                        dataSource.range(skip, take);\n                        dataItem = that._findDataItem([index - skip]);\n                        that._selectedIndexes.push(index);\n                        that._selectedDataItems.push(dataItem);\n                        that._values.push(isPrimitive(dataItem) ? dataItem : valueGetter(dataItem));\n                        added.push({\n                            index: index,\n                            dataItem: dataItem\n                        });\n                        that._getElementByIndex(index).addClass(SELECTED);\n                        dataSource.range(oldSkip, take);\n                    });\n                });\n                return added;\n            },\n            _clickHandler: function (e) {\n                var item = $(e.currentTarget);\n                if (!e.isDefaultPrevented() && item.attr('data-uid')) {\n                    this.trigger(CLICK, { item: item });\n                }\n            },\n            _buildValueGetter: function () {\n                this._valueGetter = kendo.getter(this.options.dataValueField);\n            },\n            _calculateGroupPadding: function (height) {\n                var firstItem = this.items().first(), groupHeader = this.header, padding = 0;\n                if (groupHeader[0] && groupHeader[0].style.display !== 'none') {\n                    if (height !== 'auto') {\n                        padding = kendo.support.scrollbar();\n                    }\n                    padding += parseFloat(firstItem.css('border-right-width'), 10) + parseFloat(firstItem.children('.k-group').css('right'), 10);\n                    groupHeader.css('padding-right', padding);\n                }\n            }\n        });\n        kendo.ui.VirtualList = VirtualList;\n        kendo.ui.plugin(VirtualList);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}