/** 
 * Kendo UI v2016.2.504 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(t,define){define("kendo.scheduler.timelineview.min",["kendo.scheduler.view.min"],t)}(function(){return function(t,e){function n(t){var e=new Date(1980,1,1,0,0,0);return d(e,p(t)),e}function i(t){var e=[],n=t.workWeekStart;for(e.push(n);t.workWeekEnd!=n;)n>6?n-=7:n++,e.push(n);return e}function o(t){var e,n=0;if(t.columns){for(e=0;t.columns.length>e;e++)n+=o(t.columns[e]);return t.colspan=n,n}return t.colspan=1,1}function s(t,e,n){var i,o,s,a;for(i=t.length-1;i>=0;i--)o=t[i].rectLeft,a=t[i].rectRight,s=e>=o&&a>=e,(s||o>=e&&n>=a||o>=e&&n>=o)&&(e>o&&(e=o),a>n&&(n=a));return r(t,e,n)}function r(t,e,n){var i,o,s=[];for(i=0;t.length>i;i++)o={rectLeft:t[i].rectLeft,rectRight:t[i].rectRight},(e>o.rectLeft&&o.rectRight>e||o.rectLeft>=e&&n>=o.rectRight)&&s.push(t[i]);return s}var a=window.kendo,l=a.ui,d=a.date.setTime,c=l.SchedulerView,u=t.extend,h=t.proxy,f=a.date.getDate,p=a.date.getMilliseconds,m=a.date.MS_PER_DAY,v=a.date.MS_PER_MINUTE,g="k-current-time",_="k-current-time-arrow",k="k-scheduler-header-wrap",T=.8666,D=".kendoTimelineView",w=a.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),y=a.template("<span class='k-link k-nav-day'>#=kendo.format('{0:m}', date)#</span>"),S='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',R=c.extend({init:function(t,e){var n=this;c.fn.init.call(n,t,e),n.title=n.options.title||n.options.name,n._workDays=i(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var e,n,i,o,s,r,l,d,c,u,h,f,p,m=new Date,v=this.options;if(this.datesHeader.find("."+g).remove(),this.content.find("."+g).remove(),this._isInDateSlot({start:m,end:m}))for(v.currentTimeMarker.useLocalTimezone===!1&&(e=v.dataSource.options.schema.timezone,v.dataSource&&e&&(n=a.timezone.offset(m,e),m=a.timezone.convert(m,m.getTimezoneOffset(),n))),i=v.group&&"vertical"!=v.group.orientation?this.groups.length:1,o=0;i>o;o++){if(s=this.groups[o],!s)return;if(r=a.date.toUtcTime(m),l=s.timeSlotRanges(r,r+1),0===l.length)return;d=l[0].collection,c=d.slotByStartDate(m),c&&(u="<div class='"+g+"'></div>",h=this.datesHeader.find("."+k),f=Math.round(l[0].innerRect(m,new Date(m.getTime()+1),!1).left),p=t(u).prependTo(h).addClass(_+"-down"),p.css({left:this._adjustLeftPosition(f-p.outerWidth()*T/2),top:h.find("tr:last").prev().position().top}),t(u).prependTo(this.content).css({left:this._adjustLeftPosition(f),width:"1px",bottom:"1px",top:0}))}},_adjustLeftPosition:function(t){return this._isRtl&&(t-=this.content[0].scrollWidth-this.content[0].offsetWidth),t},_currentTime:function(){var t,n=this,i=n.options.currentTimeMarker;i!==!1&&i.updateInterval!==e&&(t=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(h(this._currentTimeMarkerUpdater,n),t))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var e=this;e.element.on("click"+D,".k-event a:has(.k-si-close)",function(n){e.trigger("remove",{uid:t(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()}),e.options.editable.create!==!1&&e.element.on("dblclick"+D,".k-scheduler-content td",function(t){var n,i=e._slotByPosition(t.pageX,t.pageY);i&&(n=e._resourceBySlot(i),e.trigger("add",{eventInfo:u({start:i.startDate(),end:i.endDate()},n)})),t.preventDefault()}),e.options.editable.update!==!1&&e.element.on("dblclick"+D,".k-event",function(n){e.trigger("edit",{uid:t(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var n=this,i=0;a.support.mobileOS.android&&(i=5),n.options.editable.create!==!1&&(n._addUserEvents=new a.UserEvents(n.element,{threshold:i,filter:".k-scheduler-content td",tap:function(t){var i,o=t.x.location!==e?t.x.location:t.x,s=t.y.location!==e?t.y.location:t.y,r=n._slotByPosition(o,s);r&&(i=n._resourceBySlot(r),n.trigger("add",{eventInfo:u({start:r.startDate(),end:r.endDate()},i)})),t.preventDefault()}})),n.options.editable.update!==!1&&(n._editUserEvents=new a.UserEvents(n.element,{threshold:i,filter:".k-event",tap:function(e){var i=t(e.target).closest(".k-event");i.hasClass("k-event-active")||n.trigger("edit",{uid:i.attr(a.attr("uid"))}),e.preventDefault()}}))},_slotByPosition:function(t,e){var n,i,o,s,r=this.content,l=r.offset();for(t-=l.left,e-=l.top,this._isRtl?(s=a.support.browser,s.mozilla?(t+=r[0].scrollWidth-r[0].offsetWidth,t+=r[0].scrollLeft):s.msie?(t-=r.scrollLeft(),t+=r[0].scrollWidth-r[0].offsetWidth):s.webkit&&(t+=r[0].scrollLeft)):t+=r[0].scrollLeft,e+=r[0].scrollTop,t=Math.ceil(t),e=Math.ceil(e),o=0;this.groups.length>o;o++)if(i=this.groups[o],n=i.timeSlotByPosition(t,e))return n;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",date:a.date.today(),startTime:a.date.today(),endTime:a.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,eventMinWidth:0,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:w,dateHeaderTemplate:y,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var t=this.options,e=u({},a.Template,t.templateSettings);this.eventTemplate=this._eventTmpl(t.eventTemplate,S),this.majorTimeHeaderTemplate=a.template(t.majorTimeHeaderTemplate,e),this.dateHeaderTemplate=a.template(t.dateHeaderTemplate,e),this.slotTemplate=a.template(t.slotTemplate,e),this.groupHeaderTemplate=a.template(t.groupHeaderTemplate,e)},_render:function(e){var n=this;e=e||[],n._dates=e,n._startDate=e[0],n._endDate=e[e.length-1||0],n._calculateSlotRanges(),n.createLayout(n._layout(e)),n._content(e),n._footer(),n._setContentWidth(),n.refreshLayout(),n.datesHeader.on("click"+D,".k-nav-day",function(e){var i=t(e.currentTarget).closest("th"),o=n._slotByPosition(i.offset().left,n.content.offset().top);n.trigger("navigate",{view:"timeline",date:o.startDate()})}),n.timesHeader.find("table tr:last").hide(),n.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var t=this.content,e=t.width(),n=this.content.find("table"),i=n.find("tr:first").children().length,o=100,s=i*this.options.columnWidth;s>e&&(o=Math.ceil(s/e*100)),n.add(this.datesHeader.find("table")).css("width",o+"%")},_calculateSlotRanges:function(){var t,e,n,i,o=this._dates,s=this.startTime(),r=this.endTime();for(p(r)===p(a.date.getDate(r))&&(r=a.date.getDate(r),d(r,m-1)),r=p(r),s=p(s),t=[],e=0;o.length>e;e++)n=f(o[e]),d(n,s),i=f(o[e]),d(i,r),t.push({start:a.date.toUtcTime(n),end:a.date.toUtcTime(i)});this._slotRanges=t},_forTimeRange:function(t,e,i,o){var s,r,a,l,c,u,h,f,g,_,k,T,D,w,y,S,R,x;for(t=n(t),e=n(e),s=this,r=p(t),a=p(e),l=s.options.minorTickCount,c=s.options.majorTick*v,u=c/l||1,h=new Date(+t),f=h.getDate(),_=0,T="",k=m/u,r!=a&&(r>a&&(a+=m),k=(a-r)/u),k=Math.round(k);k>_;_++)D=_%(c/u),w=0===D,y=l-1>D,S=D===l-1,R=l,k%l!==0&&(x=l>k-(_+1),w&&x&&(R=k%l)),T+=i(h,w,y,S,R),d(h,u,!1);return a&&(g=p(h),f<h.getDate()&&(g+=m),g>a&&(h=new Date(+e))),o&&(T+=o(h)),T},_layout:function(t){var e,n,i,s=[],r=[],a=this,l=[{text:a.options.messages.defaultRowText}],d=[];for(e=0;a.options.minorTickCount>e;e++)d.push({text:"",className:""});for(this._forTimeRange(a.startTime(),a.endTime(),function(t,e,n,i,r){var l,c=a.majorTimeHeaderTemplate;e&&(l={text:c({date:t}),className:i?"k-slot-cell":"",columns:d.slice(0,r)},o(l),s.push(l))}),n=0;t.length>n;n++)r.push({text:a.dateHeaderTemplate({date:t[n]}),className:"k-slot-cell",columns:s.slice(0)});return i=this.groupedResources,i.length&&("vertical"===this._groupOrientation()?l=a._createRowsLayout(i,null,this.groupHeaderTemplate):r=a._createColumnsLayout(i,r,this.groupHeaderTemplate)),{columns:r,rows:l}},_footer:function(){var e,n,i,o=this.options;o.footer!==!1&&(e='<div class="k-header k-scheduler-footer">',n=o.footer.command,n&&"workDay"===n?(e+='<ul class="k-reset k-header">',e+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',e+=(o.showWorkHours?o.messages.showFullDay:o.messages.showWorkDay)+"</a></li>",e+="</ul>"):e+="&nbsp;",e+="</div>",this.footer=t(e).appendTo(this.element),i=this,this.footer.on("click"+D,".k-scheduler-fullday",function(t){t.preventDefault(),i.trigger("navigate",{view:i.name||o.name,date:i.startDate(),isWorkDay:!o.showWorkHours})}))},_columnCountForLevel:function(t){var e=this.columnLevels[t];return e?e.length:0},_rowCountForLevel:function(t){var e=this.rowLevels[t];return e?e.length:0},_isWorkDay:function(t){var e,n=t.getDay(),i=this._workDays;for(e=0;i.length>e;e++)if(i[e]===n)return!0;return!1},_content:function(t){var e,n,i,o,s,r=this,l=r.options,d=r.startTime(),c=this.endTime(),u=1,h=1,f=t.length,p="",m=this.groupedResources,v=this.slotTemplate,g=!1;for(m.length&&(g="vertical"===r._groupOrientation(),g?h=r._groupCount():u=r._groupCount()),p+="<tbody>",e=function(e){var s,d="",c="",u=function(t){return function(){return r._resourceBySlot({groupIndex:t})}};return a.date.isToday(t[o])&&(c+="k-today"),(a.date.getMilliseconds(e)<a.date.getMilliseconds(l.workDayStart)||a.date.getMilliseconds(e)>=a.date.getMilliseconds(l.workDayEnd)||!r._isWorkDay(t[o]))&&(c+=" k-nonwork-hour"),d+="<td"+(""!==c?' class="'+c+'"':"")+">",s=a.date.getDate(t[o]),a.date.setTime(s,a.date.getMilliseconds(e)),d+=v({date:s,resources:u(g?n:i)}),d+="</td>"},n=0;h>n;n++){for(p+="<tr>",i=0;u>i;i++)for(o=0,s=f;s>o;o++)p+=this._forTimeRange(d,c,e);p+="</tr>"}p+="</tbody>",this.content.find("table").append(p)},_groups:function(){var t,e,n,i,o=this._groupCount(),s=this._dates,r=s.length;for(this.groups=[],t=0;o>t;t++)e=this._addResourceView(t),n=s[0],i=s[s.length-1||0],e.addTimeSlotCollection(n,a.date.addDays(i,1));this._timeSlotGroups(o,r)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(t,e){var n,i,o,s,r,a,l,d,c,u,h,f,m,v,g,_,k,T,D=this._timeSlotInterval(),w=this._isVerticallyGrouped(),y=this.content.find("tr"),S=y.length;for(y.attr("role","row"),w&&(S=Math.floor(S/t)),n=0;t>n;n++)for(i=0,o=this.groups[n],w&&(i=n),r=i*S,a=0,w||(a=n),l=y[r].children,d=l.length/(w?1:t),c=d/e,u=0;e>u;u++)for(h=u*c+d*a,s=p(new Date(+this.startTime())),f=0;c>f;f++)m=l[f+h],v=o.getTimeSlotCollection(0),g=this._dates[u],_=Date.UTC(g.getFullYear(),g.getMonth(),g.getDate()),k=_+s,T=k+D,m.setAttribute("role","gridcell"),m.setAttribute("aria-selected",!1),v.addTimeSlot(m,k,T,!0),s+=D},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var t=this.options;return t.showWorkHours?t.workDayStart:t.startTime},endTime:function(){var t=this.options;return t.showWorkHours?t.workDayEnd:t.endTime},_timeSlotInterval:function(){var t=this.options;return t.majorTick/t.minorTickCount*v},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(t){var e,n,i,o,s;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),e=[],this._eventsByResource(t,this.groupedResources,e),n=[],i=0,o=0;e.length>o;o++)s={groupIndex:o,maxRowCount:0,events:{}},n.push(s),this._renderEvents(e[o],o,s),s.maxRowCount>i&&(i=s.maxRowCount);this._setRowsHeight(n,e.length,i),this._positionEvents(n,e.length),this.trigger("activate")},_positionEvents:function(t,e){var n,i,o,s;for(n=0;e>n;n++){i=t[n].events;for(o in i)s=i[o],this._positionEvent(s)}},_setRowsHeight:function(e,n,i){var o,s,r,a,l,d=this.options.eventHeight+2,c=this._getBottomRowOffset();for(n=this._isVerticallyGrouped()?n:1,o=0;n>o;o++)s=this._isVerticallyGrouped()?e[o].maxRowCount:i,s=s?s:1,r=(d+2)*s+c,a=t(this.times.find("tr")[o]),l=t(this.content.find("tr")[o]),a.height(r),l.height(r);this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var t,e,n=.5*this.options.eventHeight,i=this._isMobile();return i?(t=30,e=60):(t=15,e=30),n>e?n=e:t>n&&(n=t),n},_positionEvent:function(t){var e,n,i,o=this.options.eventHeight+2,s=t.slotRange.innerRect(t.start,t.end,!1),r=this._adjustLeftPosition(s.left),a=s.right-s.left-2;0>a&&(a=0),this.options.eventMinWidth>a&&(e=t.slotRange.collection,n=e._slots[e._slots.length-1],i=n.offsetLeft+n.offsetWidth,a=this.options.eventMinWidth,r+a>i&&(a=i-s.left-2)),t.element.css({top:t.slotRange.start.offsetTop+t.rowIndex*(o+2)+"px",left:r,width:a})},_refreshSlots:function(){for(var t=0;this.groups.length>t;t++)this.groups[t].refresh()},_eventsByResource:function(t,e,n){var i,o,s,r,l=e[0];if(l)for(i=l.dataSource.view(),o=0;i.length>o;o++)s=this._resourceValue(l,i[o]),r=new a.data.Query(t).filter({field:l.field,operator:c.groupEqFilter(s)}).toArray(),e.length>1?this._eventsByResource(r,e.slice(1),n):n.push(r);else n.push(t)},_isInDateSlot:function(t){var e=t.start,n=t.end,i=f(this._startDate),o=a.date.addDays(f(this._endDate),1);return o>e&&n>=i?!0:!1},_isInTimeSlot:function(t){var e,n=t._startTime||a.date.toUtcTime(t.start),i=t._endTime||a.date.toUtcTime(t.end),o=this._slotRanges;for(n===i&&(i+=1),e=0;o.length>e;e++)if(o[e].end>n&&i>o[e].start)return!0;return!1},_adjustEvent:function(t){var e,n=t.start,i=t.end,o=t._time("start"),s=t._time("end"),r=p(this.startTime()),l=p(this.endTime()),c=null,u=null,h=!1,v=!1;return t.isAllDay?(c=f(n),r>o&&(d(c,r),v=!0),u=f(i),l===p(f(this.endTime()))?u=a.date.addDays(u,1):(d(u,l),h=!0)):(l=0===l?m:l,r>o?(c=f(n),d(c,r),v=!0):o>l&&(c=f(n),c=a.date.addDays(c,1),d(c,r),v=!0),s>l?(u=f(i),d(u,l),h=!0):r>s&&(u=f(i),u=a.date.addDays(u,-1),d(u,l),h=!0)),e=t.clone({start:c?c:n,end:u?u:i,_startTime:c?a.date.toUtcTime(c):t._startTime,_endTime:u?a.date.toUtcTime(u):t._endTime,isAllDay:!1}),{occurrence:e,head:h,tail:v}},_renderEvents:function(t,e,n){var i,o,s,r,a,l,d,c,u,h,f;for(o=0,s=t.length;s>o;o++)i=t[o],this._isInDateSlot(i)&&(r=i.isAllDay||i.end.getTime()-i.start.getTime()>=m,a=this.content,(r||this._isInTimeSlot(i))&&(l=this._adjustEvent(i),d=this.groups[e],d._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(l.occurrence,!1),u=c[0],this._isInTimeSlot(l.occurrence)&&(h=this._createEventElement(l.occurrence,i,u.head||l.head,u.tail||l.tail),h.appendTo(a).css({top:0,height:this.options.eventHeight}),f={start:l.occurrence._startTime||l.occurrence.start,end:l.occurrence._endTime||l.occurrence.end,element:h,uid:i.uid,slotRange:u,rowIndex:0,offsetTop:0},n.events[i.uid]=f,this.addContinuousEvent(d,u,h,i.isAllDay),this._arrangeRows(f,u,n))))},addContinuousEvent:function(t,e,n,i){var o=t._continuousEvents;o.push({element:n,isAllDay:i,uid:n.attr(a.attr("uid")),start:e.start,end:e.end})},_createEventElement:function(e,n,i,o){var s,r,l=this.eventTemplate,d=this.options.editable,c=this._isMobile(),h=d&&d.destroy!==!1&&!c,f=d&&d.resize!==!1,p=n._time("start"),m=n._time("end"),v=n.start,g=n.end,_=this.eventResources(n);return n._startTime&&p!==a.date.getMilliseconds(n.start)&&(v=new Date(p),v=a.timezone.apply(v,"Etc/UTC")),n._endTime&&m!==a.date.getMilliseconds(n.end)&&(g=new Date(m),g=a.timezone.apply(g,"Etc/UTC")),s=u({},{ns:a.ns,resizable:f,showDelete:h,head:i,tail:o,singleDay:1==this._dates.length,resources:_,inverseColor:_&&_[0]?this._shouldInverseResourceColor(_[0]):!1},n,{start:v,end:g}),r=t(l(s)),this.angular("compile",function(){return{elements:r,data:[{dataItem:s}]}}),r},_arrangeRows:function(t,e,n){var i,o,r,a,l,d,u=e.start.index,h=e.end.index,f=t.slotRange.innerRect(t.start,t.end,!1),p=f.right+this.options.eventMinWidth,m=s(e.events(),f.left,p);for(e.addEvent({slotIndex:u,start:u,end:h,rectLeft:f.left,rectRight:p,element:t.element,uid:t.uid}),m.push({start:u,end:h,uid:t.uid}),i=c.createRows(m),i.length>n.maxRowCount&&(n.maxRowCount=i.length),o=0,r=i.length;r>o;o++)for(a=i[o].events,l=0,d=a.length;d>l;l++)n.events[a[l].uid].rowIndex=o},_groupCount:function(){var t=this.groupedResources;return t.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(t.length-1):this._columnCountForLevel(t.length-1):1},_updateEventForSelection:function(t){var e=this._adjustEvent(t.clone());return e.occurrence},_eventOptionsForMove:function(t){return t.isAllDay?{isAllDay:!1}:{}},_updateEventForResize:function(t){t.isAllDay&&t.set("isAllDay",!1)},_updateMoveHint:function(t,e,n){var i,o,s,r,a,l,d,c,u,h,f,p=this.groups[e],m=t.clone({start:t.start,end:t.end}),v=m.duration();for(m.start=new Date(m.start.getTime()+n),m.end=new Date(+m.start+v),i=this._adjustEvent(m),o=p.slotRanges(i.occurrence,!1),this._removeMoveHint(),s=0;o.length>s;s++)r=o[s],a=r.start,l=this._createEventElement(i.occurrence,i.occurrence,!1,!1),l.addClass("k-event-drag-hint"),d=r.innerRect(i.occurrence.start,i.occurrence.end,this.options.snap),c=d.right-d.left-2,0>c&&(c=0),u=this._adjustLeftPosition(d.left),h={left:u,top:a.offsetTop,height:a.offsetHeight-2,width:c},l.css(h),this._moveHint=this._moveHint.add(l);f=this.content,this._moveHint.appendTo(f)},_updateResizeHint:function(t,e,n,i){var o,s,r,l,d,u,h,f,p,m,v=this.groups[e],g=v.ranges(n,i,!1,!1);for(this._removeResizeHint(),o=0;g.length>o;o++)s=g[o],r=s.startSlot(),l=s.innerRect(n,i,!1),l.top=r.offsetTop,d=l.right-l.left,u=r.offsetHeight,h=this._adjustLeftPosition(l.left),f=c.fn._createResizeHint.call(this,h,l.top,d,u),this._resizeHint=this._resizeHint.add(f);p="t",m=this.content,this._resizeHint.appendTo(m),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(n),p)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(i),p))},selectionByElement:function(t){var e=t.offset();return this._slotByPosition(e.left,e.top)},_updateDirection:function(t,e,n,i,o){var s=e[0].start,r=e[e.length-1].end;n&&!o&&s.index===r.index&&s.collectionIndex===r.collectionIndex&&(t.backward=i)},_changeGroup:function(t,e){var n=e?"prevGroupSlot":"nextGroupSlot",i=this[n](t.start,t.groupIndex,!1);return i&&(t.groupIndex+=e?-1:1),i},prevGroupSlot:function(t,e,n){var i,o=this.groups[e],s=o.ranges(t,t,n,!1)[0].start;if(!(0>=e))return this._isVerticallyGrouped()?s:(i=o._collection(0,n),i.last())},nextGroupSlot:function(t,e,n){var i,o=this.groups[e],s=o.ranges(t,t,n,!1)[0].start;if(!(e>=this.groups.length-1))return this._isVerticallyGrouped()?s:(i=o._collection(0,n),i.first())},_verticalSlots:function(t,e,n,i){var o=i?"leftSlot":"rightSlot",s=e[0].start,r=e[e.length-1].end,a=this.groups[t.groupIndex];return s=a[o](s),r=a[o](r),n||!this._isVerticallyGrouped()||s&&r||(s=r=this._changeGroup(t,i)),{startSlot:s,endSlot:r}},_horizontalSlots:function(t,e,n,i){var o=i?"upSlot":"downSlot",s=e[0].start,r=e[e.length-1].end,a=this.groups[t.groupIndex];return s=a[o](s),r=a[o](r),n||!this._isHorizontallyGrouped()||s&&r||(s=r=this._changeGroup(t,i)),{startSlot:s,endSlot:r}},_changeViewPeriod:function(t,e){var n,i=e?this.previousDate():this.nextDate(),o=t.start,s=t.end;return t.start=new Date(i),t.end=new Date(i),this._isHorizontallyGrouped()&&(t.groupIndex=e?this.groups.length-1:0),n=s-o,e?(s=p(this.endTime()),s=0===s?m:s,d(t.start,s-n),d(t.end,s)):(o=p(this.startTime()),d(t.start,o),d(t.end,o+n)),t.events=[],!0},move:function(t,e,n){var i,o,s,r,l,d=!1,c=this.groups[t.groupIndex],u=a.keys,h=c.ranges(t.start,t.end,!1,!1);if(e===u.DOWN||e===u.UP)d=!0,s=e===u.UP,this._updateDirection(t,h,n,s,!0),r=this._verticalSlots(t,h,n,s);else if((e===u.LEFT||e===u.RIGHT)&&(d=!0,s=e===u.LEFT,this._updateDirection(t,h,n,s,!1),r=this._horizontalSlots(t,h,n,s),(!r.startSlot||!r.endSlot)&&!n&&this._changeViewPeriod(t,s,!1)))return d;return d&&(i=r.startSlot,o=r.endSlot,n?(l=t.backward,l&&i?t.start=i.startDate():!l&&o&&(t.end=o.endDate())):i&&o&&(t.start=i.startDate(),t.end=o.endDate()),t.events=[]),d},destroy:function(){var t=this;t.element&&t.element.off(D),t.footer&&t.footer.remove(),t._currentTimeUpdateTimer&&clearInterval(t._currentTimeUpdateTimer),c.fn.destroy.call(this),this._isMobile()&&t.options.editable&&(t.options.editable.create!==!1&&t._addUserEvents.destroy(),t.options.editable.update!==!1&&t._editUserEvents.destroy())}});u(!0,l,{TimelineView:R,TimelineWeekView:R.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var t,e,n=this.options.date,i=a.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),o=[];for(t=0,e=7;e>t;t++)o.push(i),i=a.date.nextDay(i);this._render(o)}}),TimelineWorkWeekView:R.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return a.date.dayOfWeek(a.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){for(var t=this.options.date,e=a.date.dayOfWeek(t,this.options.workWeekStart,-1),n=a.date.dayOfWeek(e,this.options.workWeekEnd,1),i=[];n>=e;)i.push(e),e=a.date.nextDay(e);this._render(i)}}),TimelineMonthView:R.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,23,59,59),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var t,e,n=this.options.date,i=a.date.firstDayOfMonth(n),o=a.date.lastDayOfMonth(n),s=[];for(t=0,e=o.getDate();e>t;t++)s.push(i),i=a.date.nextDay(i);this._render(s)}})})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e,n){(n||e)()});
//# sourceMappingURL=kendo.scheduler.timelineview.min.js.map
