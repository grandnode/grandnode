{"version":3,"sources":["kendo.filtercell.js"],"names":["f","define","$","undefined","isNonValueFilter","filter","operator","inArray","nonValueOperators","findFilterForField","field","i","result","filters","isPlainObject","hasOwnProperty","isArray","length","removeFiltersForField","expression","grep","removeDuplicates","dataSelector","dataTextField","getter","kendo","e","item","text","items","index","seen","push","window","ui","DataSource","data","Widget","CHANGE","BOOL","ENUM","STRING","EQ","NEQ","proxy","FilterCell","extend","init","element","options","wrapper","that","dataSource","viewModel","passedOptions","first","type","operators","input","fields","target","addClass","this","appendTo","attr","fn","call","model","reader","values","_parse","value","parse","defaultOperator","observable","operatorVisible","val","get","_clearInProgress","bind","updateDsFilter","initSuggestDataSource","inputWidth","width","_setInputType","showOperators","_createOperatorDropDown","_createClearIcon","template","setAutoCompleteSource","setComboBoxSource","_refreshUI","_refreshHandler","radioInput","inputName","labelTrue","labelFalse","suggestDataSource","_angularItems","suggestionOperator","delay","minLength","remove","guid","messages","isTrue","append","clone","isFalse","prop","dropdown","operatorDropDown","kendoDropDownList","dataValueField","open","popup","valuePrimitive","find","removeClass","customDataSource","group","create","_pageSize","autoComplete","setDataSource","comboBox","manuallyUpdatingVM","set","currentFilter","mergeResult","toJSON","logic","_merge","idx","clear","html","click","clearFilter","action","elements","closest","column","angular","destroy","filterModel","unbind","events","name","string","eq","neq","startswith","contains","doesnotcontain","endswith","isnull","isnotnull","isempty","isnotempty","number","gte","gt","lte","lt","date","enums","plugin","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.filtercell.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.filtercell', [\n        'kendo.autocomplete',\n        'kendo.datepicker',\n        'kendo.numerictextbox',\n        'kendo.combobox',\n        'kendo.dropdownlist'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'filtercell',\n        name: 'Row filter',\n        category: 'framework',\n        depends: ['autocomplete'],\n        advanced: true\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, DataSource = kendo.data.DataSource, Widget = ui.Widget, CHANGE = 'change', BOOL = 'boolean', ENUM = 'enums', STRING = 'string', EQ = 'Is equal to', NEQ = 'Is not equal to', proxy = $.proxy, nonValueOperators = [\n                'isnull',\n                'isnotnull',\n                'isempty',\n                'isnotempty'\n            ];\n        function isNonValueFilter(filter) {\n            var operator = typeof filter === 'string' ? filter : filter.operator;\n            return $.inArray(operator, nonValueOperators) > -1;\n        }\n        function findFilterForField(filter, field) {\n            var filters = [];\n            if ($.isPlainObject(filter)) {\n                if (filter.hasOwnProperty('filters')) {\n                    filters = filter.filters;\n                } else if (filter.field == field) {\n                    return filter;\n                }\n            }\n            if ($.isArray(filter)) {\n                filters = filter;\n            }\n            for (var i = 0; i < filters.length; i++) {\n                var result = findFilterForField(filters[i], field);\n                if (result) {\n                    return result;\n                }\n            }\n        }\n        function removeFiltersForField(expression, field) {\n            if (expression.filters) {\n                expression.filters = $.grep(expression.filters, function (filter) {\n                    removeFiltersForField(filter, field);\n                    if (filter.filters) {\n                        return filter.filters.length;\n                    } else {\n                        return filter.field != field;\n                    }\n                });\n            }\n        }\n        function removeDuplicates(dataSelector, dataTextField) {\n            var getter = kendo.getter(dataTextField, true);\n            return function (e) {\n                var items = dataSelector(e), result = [], index = 0, seen = {};\n                while (index < items.length) {\n                    var item = items[index++], text = getter(item);\n                    if (!seen.hasOwnProperty(text)) {\n                        result.push(item);\n                        seen[text] = true;\n                    }\n                }\n                return result;\n            };\n        }\n        var FilterCell = Widget.extend({\n            init: function (element, options) {\n                element = $(element).addClass('k-filtercell');\n                var wrapper = this.wrapper = $('<span/>').appendTo(element);\n                var that = this, dataSource, viewModel, passedOptions = options, first, type, operators = that.operators = options.operators || {}, input = that.input = $('<input/>').attr(kendo.attr('bind'), 'value: value').appendTo(wrapper);\n                Widget.fn.init.call(that, element[0], options);\n                options = that.options;\n                dataSource = that.dataSource = options.dataSource;\n                that.model = dataSource.reader.model;\n                type = options.type = STRING;\n                var fields = kendo.getter('reader.model.fields', true)(dataSource) || {};\n                var target = fields[options.field];\n                if (target && target.type) {\n                    type = options.type = target.type;\n                }\n                if (options.values) {\n                    options.type = type = ENUM;\n                }\n                operators = operators[type] || options.operators[type];\n                if (!passedOptions.operator) {\n                    for (first in operators) {\n                        options.operator = first;\n                        break;\n                    }\n                }\n                that._parse = function (value) {\n                    return value != null ? value + '' : value;\n                };\n                if (that.model && that.model.fields) {\n                    var field = that.model.fields[options.field];\n                    if (field) {\n                        if (field.parse) {\n                            that._parse = proxy(field.parse, field);\n                        }\n                    }\n                }\n                that.defaultOperator = options.operator;\n                that.viewModel = viewModel = kendo.observable({\n                    operator: options.operator,\n                    value: null,\n                    operatorVisible: function () {\n                        var val = this.get('value');\n                        return val !== null && val !== undefined && val != 'undefined' || isNonValueFilter(this.get('operator')) && !that._clearInProgress;\n                    }\n                });\n                viewModel.bind(CHANGE, proxy(that.updateDsFilter, that));\n                if (type == STRING) {\n                    that.initSuggestDataSource(options);\n                }\n                if (options.inputWidth !== null) {\n                    input.width(options.inputWidth);\n                }\n                that._setInputType(options, type);\n                if (type != BOOL && options.showOperators !== false) {\n                    that._createOperatorDropDown(operators);\n                } else {\n                    wrapper.addClass('k-operator-hidden');\n                }\n                that._createClearIcon();\n                kendo.bind(this.wrapper, viewModel);\n                if (type == STRING) {\n                    if (!options.template) {\n                        that.setAutoCompleteSource();\n                    }\n                }\n                if (type == ENUM) {\n                    that.setComboBoxSource(that.options.values);\n                }\n                that._refreshUI();\n                that._refreshHandler = proxy(that._refreshUI, that);\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n            },\n            _setInputType: function (options, type) {\n                var that = this, input = that.input;\n                if (typeof options.template == 'function') {\n                    options.template.call(that.viewModel, {\n                        element: that.input,\n                        dataSource: that.suggestDataSource\n                    });\n                    that._angularItems('compile');\n                } else if (type == STRING) {\n                    input.attr(kendo.attr('role'), 'autocomplete').attr(kendo.attr('text-field'), options.dataTextField || options.field).attr(kendo.attr('filter'), options.suggestionOperator).attr(kendo.attr('delay'), options.delay).attr(kendo.attr('min-length'), options.minLength).attr(kendo.attr('value-primitive'), true);\n                } else if (type == 'date') {\n                    input.attr(kendo.attr('role'), 'datepicker');\n                } else if (type == BOOL) {\n                    input.remove();\n                    var radioInput = $('<input type=\\'radio\\'/>');\n                    var wrapper = that.wrapper;\n                    var inputName = kendo.guid();\n                    var labelTrue = $('<label/>').text(options.messages.isTrue).append(radioInput);\n                    radioInput.attr(kendo.attr('bind'), 'checked:value').attr('name', inputName).val('true');\n                    var labelFalse = labelTrue.clone().text(options.messages.isFalse);\n                    radioInput.clone().val('false').appendTo(labelFalse);\n                    wrapper.append([\n                        labelTrue,\n                        labelFalse\n                    ]);\n                } else if (type == 'number') {\n                    input.attr(kendo.attr('role'), 'numerictextbox');\n                } else if (type == ENUM) {\n                    input.attr(kendo.attr('role'), 'combobox').attr(kendo.attr('text-field'), 'text').attr(kendo.attr('suggest'), true).attr(kendo.attr('filter'), 'contains').attr(kendo.attr('value-field'), 'value').attr(kendo.attr('value-primitive'), true);\n                }\n            },\n            _createOperatorDropDown: function (operators) {\n                var items = [];\n                for (var prop in operators) {\n                    items.push({\n                        text: operators[prop],\n                        value: prop\n                    });\n                }\n                var dropdown = $('<input class=\"k-dropdown-operator\" ' + kendo.attr('bind') + '=\"value: operator\"/>').appendTo(this.wrapper);\n                this.operatorDropDown = dropdown.kendoDropDownList({\n                    dataSource: items,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    open: function () {\n                        this.popup.element.width(150);\n                    },\n                    valuePrimitive: true\n                }).data('kendoDropDownList');\n                this.operatorDropDown.wrapper.find('.k-i-arrow-s').removeClass('k-i-arrow-s').addClass('k-filter');\n            },\n            initSuggestDataSource: function (options) {\n                var suggestDataSource = options.suggestDataSource;\n                if (!(suggestDataSource instanceof DataSource)) {\n                    if (!options.customDataSource && suggestDataSource) {\n                        suggestDataSource.group = undefined;\n                    }\n                    suggestDataSource = this.suggestDataSource = DataSource.create(suggestDataSource);\n                }\n                if (!options.customDataSource) {\n                    suggestDataSource._pageSize = undefined;\n                    suggestDataSource.reader.data = removeDuplicates(suggestDataSource.reader.data, this.options.field);\n                }\n                this.suggestDataSource = suggestDataSource;\n            },\n            setAutoCompleteSource: function () {\n                var autoComplete = this.input.data('kendoAutoComplete');\n                if (autoComplete) {\n                    autoComplete.setDataSource(this.suggestDataSource);\n                }\n            },\n            setComboBoxSource: function (values) {\n                var dataSource = DataSource.create({ data: values });\n                var comboBox = this.input.data('kendoComboBox');\n                if (comboBox) {\n                    comboBox.setDataSource(dataSource);\n                }\n            },\n            _refreshUI: function () {\n                var that = this, filter = findFilterForField(that.dataSource.filter(), this.options.field) || {}, viewModel = that.viewModel;\n                that.manuallyUpdatingVM = true;\n                filter = $.extend(true, {}, filter);\n                if (that.options.type == BOOL) {\n                    if (viewModel.value !== filter.value) {\n                        that.wrapper.find(':radio').prop('checked', false);\n                    }\n                }\n                if (filter.operator) {\n                    viewModel.set('operator', filter.operator);\n                }\n                viewModel.set('value', filter.value);\n                that.manuallyUpdatingVM = false;\n            },\n            updateDsFilter: function (e) {\n                var that = this, model = that.viewModel;\n                if (that.manuallyUpdatingVM || e.field == 'operator' && model.value === undefined && !isNonValueFilter(model)) {\n                    return;\n                }\n                var currentFilter = $.extend({}, that.viewModel.toJSON(), { field: that.options.field });\n                var expression = {\n                    logic: 'and',\n                    filters: []\n                };\n                if (currentFilter.value !== undefined && currentFilter.value !== null || isNonValueFilter(currentFilter) && !this._clearInProgress) {\n                    expression.filters.push(currentFilter);\n                }\n                var mergeResult = that._merge(expression);\n                if (mergeResult.filters.length) {\n                    that.dataSource.filter(mergeResult);\n                } else {\n                    that.dataSource.filter({});\n                }\n            },\n            _merge: function (expression) {\n                var that = this, logic = expression.logic || 'and', filters = expression.filters, filter, result = that.dataSource.filter() || {\n                        filters: [],\n                        logic: 'and'\n                    }, idx, length;\n                removeFiltersForField(result, that.options.field);\n                for (idx = 0, length = filters.length; idx < length; idx++) {\n                    filter = filters[idx];\n                    filter.value = that._parse(filter.value);\n                }\n                filters = $.grep(filters, function (filter) {\n                    return filter.value !== '' && filter.value !== null || isNonValueFilter(filter);\n                });\n                if (filters.length) {\n                    if (result.filters.length) {\n                        expression.filters = filters;\n                        if (result.logic !== 'and') {\n                            result.filters = [{\n                                    logic: result.logic,\n                                    filters: result.filters\n                                }];\n                            result.logic = 'and';\n                        }\n                        if (filters.length > 1) {\n                            result.filters.push(expression);\n                        } else {\n                            result.filters.push(filters[0]);\n                        }\n                    } else {\n                        result.filters = filters;\n                        result.logic = logic;\n                    }\n                }\n                return result;\n            },\n            _createClearIcon: function () {\n                var that = this;\n                $('<button type=\\'button\\' class=\\'k-button k-button-icon\\' title = ' + that.options.messages.clear + '/>').attr(kendo.attr('bind'), 'visible:operatorVisible').html('<span class=\\'k-icon k-i-close\\'/>').click(proxy(that.clearFilter, that)).appendTo(that.wrapper);\n            },\n            clearFilter: function () {\n                this._clearInProgress = true;\n                if (isNonValueFilter(this.viewModel.operator)) {\n                    this.viewModel.set('operator', this.defaultOperator);\n                }\n                this.viewModel.set('value', null);\n                this._clearInProgress = false;\n            },\n            _angularItems: function (action) {\n                var elements = this.wrapper.closest('th').get();\n                var column = this.options.column;\n                this.angular(action, function () {\n                    return {\n                        elements: elements,\n                        data: [{ column: column }]\n                    };\n                });\n            },\n            destroy: function () {\n                var that = this;\n                that.filterModel = null;\n                that.operatorDropDown = null;\n                that._angularItems('cleanup');\n                if (that._refreshHandler) {\n                    that.dataSource.bind(CHANGE, that._refreshHandler);\n                    that._refreshHandler = null;\n                }\n                kendo.unbind(that.element);\n                Widget.fn.destroy.call(that);\n                kendo.destroy(that.element);\n            },\n            events: [CHANGE],\n            options: {\n                name: 'FilterCell',\n                delay: 200,\n                minLength: 1,\n                inputWidth: null,\n                values: undefined,\n                customDataSource: false,\n                field: '',\n                dataTextField: '',\n                type: 'string',\n                suggestDataSource: null,\n                suggestionOperator: 'startswith',\n                operator: 'eq',\n                showOperators: true,\n                template: null,\n                messages: {\n                    isTrue: 'is true',\n                    isFalse: 'is false',\n                    filter: 'Filter',\n                    clear: 'Clear',\n                    operator: 'Operator'\n                },\n                operators: {\n                    string: {\n                        eq: EQ,\n                        neq: NEQ,\n                        startswith: 'Starts with',\n                        contains: 'Contains',\n                        doesnotcontain: 'Does not contain',\n                        endswith: 'Ends with',\n                        isnull: 'Is null',\n                        isnotnull: 'Is not null',\n                        isempty: 'Is empty',\n                        isnotempty: 'Is not empty'\n                    },\n                    number: {\n                        eq: EQ,\n                        neq: NEQ,\n                        gte: 'Is greater than or equal to',\n                        gt: 'Is greater than',\n                        lte: 'Is less than or equal to',\n                        lt: 'Is less than',\n                        isnull: 'Is null',\n                        isnotnull: 'Is not null'\n                    },\n                    date: {\n                        eq: EQ,\n                        neq: NEQ,\n                        gte: 'Is after or equal to',\n                        gt: 'Is after',\n                        lte: 'Is before or equal to',\n                        lt: 'Is before',\n                        isnull: 'Is null',\n                        isnotnull: 'Is not null'\n                    },\n                    enums: {\n                        eq: EQ,\n                        neq: NEQ,\n                        isnull: 'Is null',\n                        isnotnull: 'Is not null'\n                    }\n                }\n            }\n        });\n        ui.plugin(FilterCell);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}